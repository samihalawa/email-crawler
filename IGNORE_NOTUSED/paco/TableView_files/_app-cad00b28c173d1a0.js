(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{8233:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return c(7330)}])},7330:function(an,q,e){"use strict";e.r(q),e.d(q,{default:function(){return dJ}});var ao=e(7234),ap=e(7458);e(2971);var k=e(2983);let aq=["light","dark"],ar="(prefers-color-scheme: dark)",as="undefined"==typeof window,at=(0,k.createContext)(void 0),au=a=>(0,k.useContext)(at)?k.createElement(k.Fragment,null,a.children):k.createElement(av,a),av=({forcedTheme:a,disableTransitionOnChange:i=!1,enableSystem:c=!0,enableColorScheme:j=!0,storageKey:l="theme",themes:d=["light","dark"],defaultTheme:m=c?"system":"light",attribute:n="data-theme",value:e,children:f,nonce:o})=>{let[b,r]=(0,k.useState)(()=>ax(l,m)),[g,s]=(0,k.useState)(()=>ax(l)),p=e?Object.values(e):d,t=(0,k.useCallback)(f=>{let a=f;if(!a)return;"system"===f&&c&&(a=az());let d=e?e[a]:a,g=i?ay():null,b=document.documentElement;if("class"===n?(b.classList.remove(...p),d&&b.classList.add(d)):d?b.setAttribute(n,d):b.removeAttribute(n),j){let h=aq.includes(m)?m:null,k=aq.includes(a)?a:h;b.style.colorScheme=k}null==g||g()},[]),h=(0,k.useCallback)(a=>{r(a);try{localStorage.setItem(l,a)}catch(b){}},[a]),q=(0,k.useCallback)(d=>{let e=az(d);s(e),"system"===b&&c&&!a&&t("system")},[b,a]);return(0,k.useEffect)(()=>{let a=window.matchMedia(ar);return a.addListener(q),q(a),()=>a.removeListener(q)},[q]),(0,k.useEffect)(()=>{let a=a=>{a.key===l&&h(a.newValue||m)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[h]),(0,k.useEffect)(()=>{t(null!=a?a:b)},[a,b]),k.createElement(at.Provider,{value:{theme:b,setTheme:h,forcedTheme:a,resolvedTheme:"system"===b?g:b,themes:c?[...d,"system"]:d,systemTheme:c?g:void 0}},k.createElement(aw,{forcedTheme:a,disableTransitionOnChange:i,enableSystem:c,enableColorScheme:j,storageKey:l,themes:d,defaultTheme:m,attribute:n,value:e,children:f,attrs:p,nonce:o}),f)},aw=(0,k.memo)(({forcedTheme:e,storageKey:f,attribute:g,enableSystem:j,enableColorScheme:l,defaultTheme:b,value:c,attrs:m,nonce:n})=>{let h="system"===b,d="class"===g?`var d=document.documentElement,c=d.classList;c.remove(${m.map(a=>`'${a}'`).join(",")});`:`var d=document.documentElement,n='${g}',s='setAttribute';`,i=l?aq.includes(b)&&b?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${b}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",a=(a,d=!1,h=!0)=>{let e=c?c[a]:a,f=d?a+"|| ''":`'${e}'`,b="";return l&&h&&!d&&aq.includes(a)&&(b+=`d.style.colorScheme = '${a}';`),"class"===g?b+=d||e?`c.add(${f})`:"null":e&&(b+=`d[s](n,${f})`),b},o=e?`!function(){${d}${a(e)}}()`:j?`!function(){try{${d}var e=localStorage.getItem('${f}');if('system'===e||(!e&&${h})){var t='${ar}',m=window.matchMedia(t);if(m.media!==t||m.matches){${a("dark")}}else{${a("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${a(c?"x[e]":"e",!0)}}${h?"":"else{"+a(b,!1,!1)+"}"}${i}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${f}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${a(c?"x[e]":"e",!0)}}else{${a(b,!1,!1)};}${i}}catch(t){}}();`;return k.createElement("script",{nonce:n,dangerouslySetInnerHTML:{__html:o}})},()=>!0),ax=(b,c)=>{if(as)return;let a;try{a=localStorage.getItem(b)||void 0}catch(d){}return a||c},ay=()=>{let a=document.createElement("style");return a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(a),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(a)},1)}},az=a=>(a||(a=window.matchMedia(ar)),a.matches?"dark":"light");var I=e(6864),aA=e.n(I);function aB(){return(aB=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function aC(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var aD={templateTitle:"",noindex:!1,nofollow:!1,defaultOpenGraphImageWidth:0,defaultOpenGraphImageHeight:0,defaultOpenGraphVideoWidth:0,defaultOpenGraphVideoHeight:0},aE=function(d,a,b){void 0===a&&(a=[]);var c=void 0===b?{}:b,e=c.defaultWidth,f=c.defaultHeight;return a.reduce(function(b,a,c){return b.push(k.createElement("meta",{key:"og:"+d+":0"+c,property:"og:"+d,content:a.url})),a.alt&&b.push(k.createElement("meta",{key:"og:"+d+":alt0"+c,property:"og:"+d+":alt",content:a.alt})),a.secureUrl&&b.push(k.createElement("meta",{key:"og:"+d+":secure_url0"+c,property:"og:"+d+":secure_url",content:a.secureUrl.toString()})),a.type&&b.push(k.createElement("meta",{key:"og:"+d+":type0"+c,property:"og:"+d+":type",content:a.type.toString()})),a.width?b.push(k.createElement("meta",{key:"og:"+d+":width0"+c,property:"og:"+d+":width",content:a.width.toString()})):e&&b.push(k.createElement("meta",{key:"og:"+d+":width0"+c,property:"og:"+d+":width",content:e.toString()})),a.height?b.push(k.createElement("meta",{key:"og:"+d+":height"+c,property:"og:"+d+":height",content:a.height.toString()})):f&&b.push(k.createElement("meta",{key:"og:"+d+":height"+c,property:"og:"+d+":height",content:f.toString()})),b},[])},aF=function(a){var g,h,i,j,l,b=[];a.titleTemplate&&(aD.templateTitle=a.titleTemplate);var e="";a.title?(e=a.title,aD.templateTitle&&(e=aD.templateTitle.replace(/%s/g,function(){return e}))):a.defaultTitle&&(e=a.defaultTitle),e&&b.push(k.createElement("title",{key:"title"},e));var m=a.noindex||aD.noindex||a.dangerouslySetAllPagesToNoIndex,n=a.nofollow||aD.nofollow||a.dangerouslySetAllPagesToNoFollow,f="";if(a.robotsProps){var c=a.robotsProps,s=c.nosnippet,o=c.maxSnippet,p=c.maxImagePreview,q=c.maxVideoPreview,t=c.noarchive,u=c.noimageindex,v=c.notranslate,r=c.unavailableAfter;f=(s?",nosnippet":"")+(o?",max-snippet:"+o:"")+(p?",max-image-preview:"+p:"")+(t?",noarchive":"")+(r?",unavailable_after:"+r:"")+(u?",noimageindex":"")+(q?",max-video-preview:"+q:"")+(v?",notranslate":"")}if(m||n?(a.dangerouslySetAllPagesToNoIndex&&(aD.noindex=!0),a.dangerouslySetAllPagesToNoFollow&&(aD.nofollow=!0),b.push(k.createElement("meta",{key:"robots",name:"robots",content:(m?"noindex":"index")+","+(n?"nofollow":"follow")+f}))):b.push(k.createElement("meta",{key:"robots",name:"robots",content:"index,follow"+f})),a.description&&b.push(k.createElement("meta",{key:"description",name:"description",content:a.description})),a.mobileAlternate&&b.push(k.createElement("link",{rel:"alternate",key:"mobileAlternate",media:a.mobileAlternate.media,href:a.mobileAlternate.href})),a.languageAlternates&&a.languageAlternates.length>0&&a.languageAlternates.forEach(function(a){b.push(k.createElement("link",{rel:"alternate",key:"languageAlternate-"+a.hrefLang,hrefLang:a.hrefLang,href:a.href}))}),a.twitter&&(a.twitter.cardType&&b.push(k.createElement("meta",{key:"twitter:card",name:"twitter:card",content:a.twitter.cardType})),a.twitter.site&&b.push(k.createElement("meta",{key:"twitter:site",name:"twitter:site",content:a.twitter.site})),a.twitter.handle&&b.push(k.createElement("meta",{key:"twitter:creator",name:"twitter:creator",content:a.twitter.handle}))),a.facebook&&a.facebook.appId&&b.push(k.createElement("meta",{key:"fb:app_id",property:"fb:app_id",content:a.facebook.appId})),(null!=(g=a.openGraph)&&g.title||e)&&b.push(k.createElement("meta",{key:"og:title",property:"og:title",content:(null==(j=a.openGraph)?void 0:j.title)||e})),(null!=(h=a.openGraph)&&h.description||a.description)&&b.push(k.createElement("meta",{key:"og:description",property:"og:description",content:(null==(l=a.openGraph)?void 0:l.description)||a.description})),a.openGraph){if((a.openGraph.url||a.canonical)&&b.push(k.createElement("meta",{key:"og:url",property:"og:url",content:a.openGraph.url||a.canonical})),a.openGraph.type){var d=a.openGraph.type.toLowerCase();b.push(k.createElement("meta",{key:"og:type",property:"og:type",content:d})),"profile"===d&&a.openGraph.profile?(a.openGraph.profile.firstName&&b.push(k.createElement("meta",{key:"profile:first_name",property:"profile:first_name",content:a.openGraph.profile.firstName})),a.openGraph.profile.lastName&&b.push(k.createElement("meta",{key:"profile:last_name",property:"profile:last_name",content:a.openGraph.profile.lastName})),a.openGraph.profile.username&&b.push(k.createElement("meta",{key:"profile:username",property:"profile:username",content:a.openGraph.profile.username})),a.openGraph.profile.gender&&b.push(k.createElement("meta",{key:"profile:gender",property:"profile:gender",content:a.openGraph.profile.gender}))):"book"===d&&a.openGraph.book?(a.openGraph.book.authors&&a.openGraph.book.authors.length&&a.openGraph.book.authors.forEach(function(a,c){b.push(k.createElement("meta",{key:"book:author:0"+c,property:"book:author",content:a}))}),a.openGraph.book.isbn&&b.push(k.createElement("meta",{key:"book:isbn",property:"book:isbn",content:a.openGraph.book.isbn})),a.openGraph.book.releaseDate&&b.push(k.createElement("meta",{key:"book:release_date",property:"book:release_date",content:a.openGraph.book.releaseDate})),a.openGraph.book.tags&&a.openGraph.book.tags.length&&a.openGraph.book.tags.forEach(function(a,c){b.push(k.createElement("meta",{key:"book:tag:0"+c,property:"book:tag",content:a}))})):"article"===d&&a.openGraph.article?(a.openGraph.article.publishedTime&&b.push(k.createElement("meta",{key:"article:published_time",property:"article:published_time",content:a.openGraph.article.publishedTime})),a.openGraph.article.modifiedTime&&b.push(k.createElement("meta",{key:"article:modified_time",property:"article:modified_time",content:a.openGraph.article.modifiedTime})),a.openGraph.article.expirationTime&&b.push(k.createElement("meta",{key:"article:expiration_time",property:"article:expiration_time",content:a.openGraph.article.expirationTime})),a.openGraph.article.authors&&a.openGraph.article.authors.length&&a.openGraph.article.authors.forEach(function(a,c){b.push(k.createElement("meta",{key:"article:author:0"+c,property:"article:author",content:a}))}),a.openGraph.article.section&&b.push(k.createElement("meta",{key:"article:section",property:"article:section",content:a.openGraph.article.section})),a.openGraph.article.tags&&a.openGraph.article.tags.length&&a.openGraph.article.tags.forEach(function(a,c){b.push(k.createElement("meta",{key:"article:tag:0"+c,property:"article:tag",content:a}))})):("video.movie"===d||"video.episode"===d||"video.tv_show"===d||"video.other"===d)&&a.openGraph.video&&(a.openGraph.video.actors&&a.openGraph.video.actors.length&&a.openGraph.video.actors.forEach(function(a,c){a.profile&&b.push(k.createElement("meta",{key:"video:actor:0"+c,property:"video:actor",content:a.profile})),a.role&&b.push(k.createElement("meta",{key:"video:actor:role:0"+c,property:"video:actor:role",content:a.role}))}),a.openGraph.video.directors&&a.openGraph.video.directors.length&&a.openGraph.video.directors.forEach(function(a,c){b.push(k.createElement("meta",{key:"video:director:0"+c,property:"video:director",content:a}))}),a.openGraph.video.writers&&a.openGraph.video.writers.length&&a.openGraph.video.writers.forEach(function(a,c){b.push(k.createElement("meta",{key:"video:writer:0"+c,property:"video:writer",content:a}))}),a.openGraph.video.duration&&b.push(k.createElement("meta",{key:"video:duration",property:"video:duration",content:a.openGraph.video.duration.toString()})),a.openGraph.video.releaseDate&&b.push(k.createElement("meta",{key:"video:release_date",property:"video:release_date",content:a.openGraph.video.releaseDate})),a.openGraph.video.tags&&a.openGraph.video.tags.length&&a.openGraph.video.tags.forEach(function(a,c){b.push(k.createElement("meta",{key:"video:tag:0"+c,property:"video:tag",content:a}))}),a.openGraph.video.series&&b.push(k.createElement("meta",{key:"video:series",property:"video:series",content:a.openGraph.video.series})))}a.defaultOpenGraphImageWidth&&(aD.defaultOpenGraphImageWidth=a.defaultOpenGraphImageWidth),a.defaultOpenGraphImageHeight&&(aD.defaultOpenGraphImageHeight=a.defaultOpenGraphImageHeight),a.openGraph.images&&a.openGraph.images.length&&b.push.apply(b,aE("image",a.openGraph.images,{defaultWidth:aD.defaultOpenGraphImageWidth,defaultHeight:aD.defaultOpenGraphImageHeight})),a.defaultOpenGraphVideoWidth&&(aD.defaultOpenGraphVideoWidth=a.defaultOpenGraphVideoWidth),a.defaultOpenGraphVideoHeight&&(aD.defaultOpenGraphVideoHeight=a.defaultOpenGraphVideoHeight),a.openGraph.videos&&a.openGraph.videos.length&&b.push.apply(b,aE("video",a.openGraph.videos,{defaultWidth:aD.defaultOpenGraphVideoWidth,defaultHeight:aD.defaultOpenGraphVideoHeight})),a.openGraph.locale&&b.push(k.createElement("meta",{key:"og:locale",property:"og:locale",content:a.openGraph.locale})),a.openGraph.site_name&&b.push(k.createElement("meta",{key:"og:site_name",property:"og:site_name",content:a.openGraph.site_name}))}return a.canonical&&b.push(k.createElement("link",{rel:"canonical",href:a.canonical,key:"canonical"})),a.additionalMetaTags&&a.additionalMetaTags.length>0&&a.additionalMetaTags.forEach(function(a){var c,d,e;b.push(k.createElement("meta",aB({key:"meta:"+(null!=(c=null!=(d=null!=(e=a.keyOverride)?e:a.name)?d:a.property)?c:a.httpEquiv)},a)))}),null!=(i=a.additionalLinkTags)&&i.length&&a.additionalLinkTags.forEach(function(a){var c;b.push(k.createElement("link",aB({key:"link"+(null!=(c=a.keyOverride)?c:a.href)+a.rel},a)))}),b};k.Component;var aG=function(d){var a,b;function c(){return d.apply(this,arguments)||this}return a=c,b=d,a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b,c.prototype.render=function(){var a=this.props,c=a.title,b=a.noindex,d=a.nofollow,e=a.robotsProps,f=a.description,g=a.canonical,h=a.openGraph,i=a.facebook,j=a.twitter,l=a.additionalMetaTags,m=a.titleTemplate,n=a.defaultTitle,o=a.mobileAlternate,p=a.languageAlternates,q=a.additionalLinkTags;return k.createElement(aA(),null,aF({title:c,noindex:void 0!==b&&b,nofollow:d,robotsProps:e,description:f,canonical:g,facebook:i,openGraph:h,additionalMetaTags:l,twitter:j,titleTemplate:m,defaultTitle:n,mobileAlternate:o,languageAlternates:p,additionalLinkTags:q}))},c}(k.Component),aH=function(d,a){var b=a.id,e=void 0===b?void 0:b,c=aB({},e?{"@id":a.id}:{},a);return delete c.id,{__html:JSON.stringify(aB({"@context":"https://schema.org","@type":d},c),aK)}},J=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}),aI=RegExp("["+Object.keys(J).join("")+"]","g"),aJ=function(a){return J[a]},aK=function(b,a){switch(typeof a){case"object":if(null===a)return;return a;case"number":case"boolean":case"bigint":return a;case"string":return a.replace(aI,aJ);default:return}};function aL(a){var b;return"string"==typeof a?{"@type":"Person",name:a}:"object"==typeof(b=a)&&b.name&&b.url?{"@type":"Person",name:a.name,url:a.url}:void 0}var aM=e(7652);function aN(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function r(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?aN(Object(b),!0).forEach(function(a){aR(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):aN(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}function aO(a){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function aP(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function aQ(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function s(a,b,c){return b&&aQ(a.prototype,b),c&&aQ(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function aR(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aS(b,a){if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&aU(b,a)}function aT(a){return(aT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function aU(a,b){return(aU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function aV(a){var b=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var c,d=aT(a);if(b){var e=aT(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return function(b,a){if(a&&("object"==typeof a||"function"==typeof a))return a;if(void 0!==a)throw TypeError("Derived constructors may only return object or undefined");return function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(b)}(this,c)}}function aW(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var f,g,c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||aY(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aX(a){return function(a){if(Array.isArray(a))return aZ(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||aY(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aY(a,c){if(a){if("string"==typeof a)return aZ(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);return"Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b?Array.from(a):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?aZ(a,c):void 0}}function aZ(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=Array(a);b<a;b++)d[b]=c[b];return d}function a$(a,d){var b="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!b){if(Array.isArray(a)||(b=aY(a))||d&&a&&"number"==typeof a.length){b&&(a=b);var e=0,c=function(){};return{s:c,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(a){throw a},f:c}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function(){b=b.call(a)},n:function(){var a=b.next();return g=a.done,a},e:function(a){h=!0,f=a},f:function(){try{g||null==b.return||b.return()}finally{if(h)throw f}}}}var a_={DEBUG:!1,LIB_VERSION:"1.98.2"},K=Array.isArray,t=Object.prototype,a0=t.hasOwnProperty,a1=t.toString,a2=K||function(a){return"[object Array]"===a1.call(a)},a3=function(a){return"[object Uint8Array]"===a1.call(a)},a4=function(a){return"function"==typeof a},a5=function(a){return a===Object(a)&&!a2(a)},a6=function(a){if(a5(a)){for(var b in a)if(a0.call(a,b))return!1;return!0}return!1},L=function(a){return void 0===a},a7=function(a){return"[object String]"==a1.call(a)},a8=function(a){return null===a},a9=function(a){return"[object Number]"==a1.call(a)},ba=function(a){return"[object Boolean]"===a1.call(a)},u=Array.prototype,bb=u.forEach,bc=u.indexOf,d="undefined"!=typeof window?window:void 0,v=null==d?void 0:d.navigator,bd=null==d?void 0:d.document,l=null==v?void 0:v.userAgent,be=null!=d?d:{},bf="[PostHog.js]",bg={_log:function(b){if(d&&(a_.DEBUG||be.POSTHOG_DEBUG)&&!L(d.console)&&d.console){for(var f=("__rrweb_original__"in d.console[b])?d.console[b].__rrweb_original__:d.console[b],c=arguments.length,e=Array(c>1?c-1:0),a=1;a<c;a++)e[a-1]=arguments[a];f.apply(void 0,[bf].concat(e))}},info:function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];bg._log.apply(bg,["log"].concat(c))},warn:function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];bg._log.apply(bg,["warn"].concat(c))},error:function(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];bg._log.apply(bg,["error"].concat(c))},critical:function(){for(var b,c=arguments.length,d=Array(c),a=0;a<c;a++)d[a]=arguments[a];(b=console).error.apply(b,[bf].concat(d))},uninitializedWarning:function(a){bg.error("You must initialize PostHog before calling ".concat(a))}},bh={},bi=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function bj(a,c,d){if(a2(a)){if(bb&&a.forEach===bb)a.forEach(c,d);else if("length"in a&&a.length=== +a.length){for(var b=0,e=a.length;b<e;b++)if(b in a&&c.call(d,a[b],b)===bh)return}}}function bk(a,c,d){if(!a8(a)&&!L(a)){if(a2(a))return bj(a,c,d);for(var b in a)if(a0.call(a,b)&&c.call(d,a[b],b)===bh)return}}var bl=function(d){for(var b=arguments.length,c=Array(b>1?b-1:0),a=1;a<b;a++)c[a-1]=arguments[a];return bj(c,function(a){for(var b in a)void 0!==a[b]&&(d[b]=a[b])}),d};function bm(a,b){return -1!==a.indexOf(b)}function bn(c){for(var b=Object.keys(c),a=b.length,d=Array(a);a--;)d[a]=[b[a],c[b[a]]];return d}var bo=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},bp=function(a){try{return a()}catch(b){return}},bq=function(a){return function(){try{for(var c=arguments.length,d=Array(c),b=0;b<c;b++)d[b]=arguments[b];return a.apply(this,d)}catch(e){bg.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),bg.critical(e)}}},br=function(a){var b={};return bk(a,function(a,c){a7(a)&&a.length>0&&(b[c]=a)}),b},bs=["$performance_raw"];function bt(a){var f,g,h,i,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=0,k=0,b="",j=[];if(!a)return a;a=bu(a);do f=(c=a.charCodeAt(e++)<<16|a.charCodeAt(e++)<<8|a.charCodeAt(e++))>>18&63,g=c>>12&63,h=c>>6&63,i=63&c,j[k++]=d.charAt(f)+d.charAt(g)+d.charAt(h)+d.charAt(i);while(e<a.length)switch(b=j.join(""),a.length%3){case 1:b=b.slice(0,-2)+"==";break;case 2:b=b.slice(0,-1)+"="}return b}var bu=function(b){var c,d,h,e,f="";for(c=d=0,h=(b=(b+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,e=0;e<h;e++){var a=b.charCodeAt(e),g=null;a<128?d++:g=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),a8(g)||(d>c&&(f+=b.substring(c,d)),f+=g,c=d=e+1)}return d>c&&(f+=b.substring(c,b.length)),f},bv=function(){function a(b){return b&&(b.preventDefault=a.preventDefault,b.stopPropagation=a.stopPropagation),b}return a.preventDefault=function(){this.returnValue=!1},a.stopPropagation=function(){this.cancelBubble=!0},function(b,c,e,g,h){if(b){if(b.addEventListener&&!g)b.addEventListener(c,e,!!h);else{var i,j,k,f="on"+c,l=b[f];b[f]=(i=b,j=e,k=l,function(b){if(b=b||a(null==d?void 0:d.event)){var c,e=!0;a4(k)&&(c=k(b));var f=j.call(i,b);return!1!==c&& !1!==f||(e=!1),e}})}}else bg.error("No valid element provided to register_event")}}();function bw(b,c){var a=function(){if(!bd)return c("document not found");var a=bd.createElement("script");a.type="text/javascript",a.src=b,a.onload=function(a){return c(void 0,a)},a.onerror=function(a){return c(a)};var d,e=bd.querySelectorAll("body > script");e.length>0?null===(d=e[0].parentNode)|| void 0===d||d.insertBefore(a,e[0]):bd.body.appendChild(a)};null!=bd&&bd.body?a():null==bd||bd.addEventListener("DOMContentLoaded",a)}function bx(a){return a?bi(a).split(/\s+/):[]}function by(a){var b="";switch(aO(a.className)){case"string":b=a.className;break;case"object":b=("baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";break;default:b=""}return bx(b)}function bz(a){var b="";return bF(a)&&!bG(a)&&a.childNodes&&a.childNodes.length&&bk(a.childNodes,function(a){bC(a)&&a.textContent&&(b+=bi(a.textContent).split(/(\s+)/).filter(bH).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),bi(b)}function bA(a){return!!a&&1===a.nodeType}function bB(a,b){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function bC(a){return!!a&&3===a.nodeType}function bD(a){return!!a&&11===a.nodeType}var bE=["a","button","form","input","select","textarea","label"];function bF(a){for(var b=a;b.parentNode&&!bB(b,"body");b=b.parentNode){var c=by(b);if(bm(c,"ph-sensitive")||bm(c,"ph-no-capture"))return!1}if(bm(by(a),"ph-include"))return!0;var d=a.type||"";if(a7(d))switch(d.toLowerCase()){case"hidden":case"password":return!1}var e=a.name||a.id||"";return!(a7(e)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(e.replace(/[^a-zA-Z0-9]/g,"")))}function bG(a){return!!(bB(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||bB(a,"select")||bB(a,"textarea")||"true"===a.getAttribute("contenteditable"))}function bH(a){return!(a8(a)||L(a)||a7(a)&&(a=bi(a),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((a||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(a)))}function bI(b){var a=bz(b);return bH(a="".concat(a," ").concat(bJ(b)).trim())?a:""}function bJ(a){var b="";return a&&a.childNodes&&a.childNodes.length&&bk(a.childNodes,function(a){var c;if(a&&"span"===(null===(c=a.tagName)|| void 0===c?void 0:c.toLowerCase()))try{var d=bz(a);b="".concat(b," ").concat(d).trim(),a.childNodes&&a.childNodes.length&&(b="".concat(b," ").concat(bJ(a)).trim())}catch(e){bg.error(e)}}),b}function bK(a){return a.replace(/"|\\"/g,'\\"')}var bL=function(){function a(b){aP(this,a),this.clicks=[],this.enabled=b}return s(a,[{key:"isRageClick",value:function(b,c,d){if(!this.enabled)return!1;var a=this.clicks[this.clicks.length-1];if(a&&Math.abs(b-a.x)+Math.abs(c-a.y)<30&&d-a.timestamp<1e3){if(this.clicks.push({x:b,y:c,timestamp:d}),3===this.clicks.length)return!0}else this.clicks=[{x:b,y:c,timestamp:d}];return!1}}]),a}(),M="$people_distinct_id",N="__alias",O="__timers",bM="$autocapture_disabled_server_side",P="$session_recording_enabled_server_side",bN="$console_log_recording_enabled_server_side",bO="$session_recording_recorder_version_server_side",bP="$session_recording_network_payload_capture",w="$sesid",Q="$session_is_sampled",R="$enabled_feature_flags",S="$early_access_features",T="$stored_person_properties",U="$stored_group_properties",V="$surveys",W="$flag_call_reported",X="$user_state",Y="$posthog_quota_limited",Z="$client_session_props",bQ=[M,N,"__cmpns",O,P,w,R,X,Y,S,U,T,V,W,Z];function bR(b,a){return a.length>b?a.slice(0,b)+"...":a}var x={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(b){var a,c=a8(this._isDisabledServerSide)?!(null===(a=b.persistence)|| void 0===a||!a.props[bM]):this._isDisabledServerSide,d=!!b.config.autocapture;this._isAutocaptureEnabled=d&&!c},_previousElementSibling:function(b){if(b.previousElementSibling)return b.previousElementSibling;var a=b;do a=a.previousSibling;while(a&&!bA(a))return a},_getAugmentPropertiesFromElement:function(a){if(!bF(a))return{};var b={};return bk(a.attributes,function(a){if(0===a.name.indexOf("data-ph-capture-attribute")){var d=a.name.replace("data-ph-capture-attribute-",""),c=a.value;d&&c&&bH(c)&&(b[d]=c)}}),b},_getPropertiesFromElement:function(a,j,i){var d,c=a.tagName.toLowerCase(),b={tag_name:c};bE.indexOf(c)> -1&&!i&&("a"===c.toLowerCase()||"button"===c.toLowerCase()?b.$el_text=bR(1024,bI(a)):b.$el_text=bR(1024,bz(a)));var f=by(a);f.length>0&&(b.classes=f.filter(function(a){return""!==a}));var k=null===(d=this.config)|| void 0===d?void 0:d.element_attribute_ignorelist;bk(a.attributes,function(c){var d;if((!bG(a)|| -1!==["name","id","class"].indexOf(c.name))&&(null==k||!k.includes(c.name))&&!j&&bH(c.value)&&(!a7(d=c.name)||"_ngcontent"!==d.substring(0,10)&&"_nghost"!==d.substring(0,7))){var e=c.value;"class"===c.name&&(e=bx(e).join(" ")),b["attr__"+c.name]=bR(1024,e)}});for(var g=1,h=1,e=a;e=this._previousElementSibling(e);)g++,e.tagName===a.tagName&&h++;return b.nth_child=g,b.nth_of_type=h,b},_getDefaultProperties:function(a){return{$event_type:a,$ce_version:1}},_extractCustomPropertyValue:function(a){var b=[];return bk(null==bd?void 0:bd.querySelectorAll(a.css_selector),function(a){var c;["input","select"].indexOf(a.tagName.toLowerCase())> -1?c=a.value:a.textContent&&(c=a.textContent),bH(c)&&b.push(c)}),b.join(", ")},_getCustomProperties:function(b){var c=this,a={};return bk(this._customProperties,function(d){bk(d.event_selectors,function(e){bk(null==bd?void 0:bd.querySelectorAll(e),function(e){bm(b,e)&&bF(e)&&(a[d.name]=c._extractCustomPropertyValue(d))})})}),a},_getEventTarget:function(a){var b;return L(a.target)?a.srcElement||null:null!==(b=a.target)&& void 0!==b&&b.shadowRoot?a.composedPath()[0]||null:a.target||null},_captureEvent:function(c,f){var h,t=this,k=arguments.length>2&& void 0!==arguments[2]?arguments[2]:"$autocapture",a=this._getEventTarget(c);if(bC(a)&&(a=a.parentNode||null),"$autocapture"===k&&"click"===c.type&&c instanceof MouseEvent&&null!==(h=this.rageclicks)&& void 0!==h&&h.isRageClick(c.clientX,c.clientY,(new Date).getTime())&&this._captureEvent(c,f,"$rageclick"),a&&function(b,e){var a=arguments.length>2&& void 0!==arguments[2]?arguments[2]:void 0;if(!d||!b||bB(b,"html")||!bA(b))return!1;if(null!=a&&a.url_allowlist){var p=d.location.href,h=a.url_allowlist;if(h&&!h.some(function(a){return p.match(a)}))return!1}if(null!=a&&a.dom_event_allowlist){var i=a.dom_event_allowlist;if(i&&!i.some(function(a){return e.type===a}))return!1}if(null!=a&&a.element_allowlist){var j=a.element_allowlist;if(j&&!j.some(function(a){return b.tagName.toLowerCase()===a}))return!1}if(null!=a&&a.css_selector_allowlist){var k=a.css_selector_allowlist;if(k&&!k.some(function(a){return b.matches(a)}))return!1}for(var g=!1,l=[b],f=!0,c=b;c.parentNode&&!bB(c,"body");)if(bD(c.parentNode))l.push(c.parentNode.host),c=c.parentNode.host;else{if(!(f=c.parentNode||!1))break;if(bE.indexOf(f.tagName.toLowerCase())> -1)g=!0;else{var m=d.getComputedStyle(f);m&&"pointer"===m.getPropertyValue("cursor")&&(g=!0)}l.push(f),c=f}var n=d.getComputedStyle(b);if(n&&"pointer"===n.getPropertyValue("cursor")&&"click"===e.type)return!0;var o=b.tagName.toLowerCase();switch(o){case"html":return!1;case"form":return"submit"===e.type;case"input":case"select":case"textarea":return"change"===e.type||"click"===e.type;default:return g?"click"===e.type:"click"===e.type&&(bE.indexOf(o)> -1||"true"===b.getAttribute("contenteditable"))}}(a,c,this.config)){for(var i,j,g=[a],b=a;b.parentNode&&!bB(b,"body");)bD(b.parentNode)?(g.push(b.parentNode.host),b=b.parentNode.host):(g.push(b.parentNode),b=b.parentNode);var l,e=[],m={},n=!1;if(bk(g,function(a){var b=bF(a);"a"===a.tagName.toLowerCase()&&(l=a.getAttribute("href"),l=b&&bH(l)&&l),bm(by(a),"ph-no-capture")&&(n=!0),e.push(t._getPropertiesFromElement(a,f.config.mask_all_element_attributes,f.config.mask_all_text));var c=t._getAugmentPropertiesFromElement(a);bl(m,c)}),f.config.mask_all_text||("a"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase()?e[0].$el_text=bI(a):e[0].$el_text=bz(a)),l&&(e[0].attr__href=l),n)return!1;var o,p,q,s=bl(this._getDefaultProperties(c.type),f.elementsChainAsString?{$elements_chain:(q=(p=o=e).map(function(a){var e,b,c,d,f={text:null===(c=a.$el_text)|| void 0===c?void 0:c.slice(0,400),tag_name:a.tag_name,href:null===(d=a.attr__href)|| void 0===d?void 0:d.slice(0,2048),attr_class:(e=a,b=e.attr__class,b?a2(b)?b:bx(b):void 0),attr_id:a.attr__id,nth_child:a.nth_child,nth_of_type:a.nth_of_type,attributes:{}};return bn(a).filter(function(a){return 0===aW(a,1)[0].indexOf("attr__")}).forEach(function(b){var a=aW(b,2),c=a[0],d=a[1];return f.attributes[c]=d}),f})).map(function(a){var d,e,b="";if(a.tag_name&&(b+=a.tag_name),a.attr_class){a.attr_class.sort();var f,c=a$(a.attr_class);try{for(c.s();!(f=c.n()).done;){var h=f.value;b+=".".concat(h.replace(/"/g,""))}}catch(i){c.e(i)}finally{c.f()}}var g=r(r(r(r({},a.text?{text:a.text}:{}),{},{"nth-child":null!==(d=a.nth_child)&& void 0!==d?d:0,"nth-of-type":null!==(e=a.nth_of_type)&& void 0!==e?e:0},a.href?{href:a.href}:{}),a.attr_id?{attr_id:a.attr_id}:{}),a.attributes),j={};return bn(g).sort(function(a,b){var c=aW(a,1)[0],d=aW(b,1)[0];return c.localeCompare(d)}).forEach(function(b){var a=aW(b,2),c=a[0],d=a[1];return j[bK(c.toString())]=bK(d.toString())}),b+=":",b+=bn(g).map(function(b){var a=aW(b,2),c=a[0],d=a[1];return"".concat(c,'="').concat(d,'"')}).join("")}).join(";")}:{$elements:e},null!==(i=e[0])&& void 0!==i&&i.$el_text?{$el_text:null===(j=e[0])|| void 0===j?void 0:j.$el_text}:{},this._getCustomProperties(g),m);return f.capture(k,s),!0}},_navigate:function(a){d&&(d.location.href=a)},_addDomEventHandlers:function(b){var c=this;if(d&&bd){var a=function(a){a=a||(null==d?void 0:d.event),c._captureEvent(a,b)};bv(bd,"submit",a,!1,!0),bv(bd,"change",a,!1,!0),bv(bd,"click",a,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(a){var b;ba(a.__autocapture)||(this.config=a.__autocapture),null!==(b=this.config)&& void 0!==b&&b.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(a){return RegExp(a)})),this.rageclicks=new bL(a.config.rageclick)},afterDecideResponse:function(a,b){var c=b.config.token;this._initializedTokens.indexOf(c)> -1?bg.info('autocapture already initialized for token "'+c+'"'):(b.persistence&&b.persistence.register(aR({},bM,!!a.autocapture_opt_out)),this._isDisabledServerSide=!!a.autocapture_opt_out,this._setIsAutocaptureEnabled(b),this._initializedTokens.push(c),a&&a.config&&a.config.enable_collect_everything&&this._isAutocaptureEnabled?(a.custom_properties&&(this._customProperties=a.custom_properties),this._addDomEventHandlers(b)):b.__autocapture=!1)},enabledForProject:function(c,a,b){if(!c)return!0;a=L(a)?10:a,b=L(b)?10:b;for(var e=0,d=0;d<c.length;d++)e+=c.charCodeAt(d);return e%a<b},isBrowserSupported:function(){return a4(null==bd?void 0:bd.querySelectorAll)}};!function(a){for(var b in a)a4(a[b])&&(a[b]=a[b].bind(a))}(x),function(a){for(var b in a)a4(a[b])&&(a[b]=bq(a[b]))}(x);var bS="$active_feature_flags",bT="$override_feature_flags",bU="$feature_flag_payloads",bV=function(f){var b,c={},a=a$(bn(f||{}));try{for(a.s();!(b=a.n()).done;){var d=aW(b.value,2),g=d[0],e=d[1];e&&(c[g]=e)}}catch(h){a.e(h)}finally{a.f()}return c},bW=function(){function a(b){aP(this,a),this.instance=b,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return s(a,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(R),b=this.instance.get_property(bT);if(!b)return e||{};for(var d=bl({},e),c=Object.keys(b),a=0;a<c.length;a++)!1===b[c[a]]?delete d[c[a]]:d[c[a]]=b[c[a]];return this._override_warning||(bg.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:b,finalFlags:d}),this._override_warning=!0),d}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(bU)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(a){this.$anon_distinct_id=a}},{key:"setReloadingPaused",value:function(a){this.reloadFeatureFlagsInAction=a}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var a=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!a.reloadFeatureFlagsInAction&&a.reloadFeatureFlagsQueued&&(a.reloadFeatureFlagsQueued=!1,a._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var a=this.instance.config.token,b=this.instance.get_property(T),c=this.instance.get_property(U),d=bt(JSON.stringify({token:a,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:b,group_properties:c,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:d},{method:"POST"},this.instance._prepare_callback(function(a){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(a),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(a){var f=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var c,d=this.getFlagVariants()[a],e="".concat(d),b=this.instance.get_property(W)||{};return!f.send_event&&"send_event"in f||a in b&&b[a].includes(e)||(a2(b[a])?b[a].push(e):b[a]=[e],null===(c=this.instance.persistence)|| void 0===c||c.register(aR({},W,b)),this.instance.capture("$feature_flag_called",{$feature_flag:a,$feature_flag_response:d})),d}bg.warn('getFeatureFlag for key "'+a+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(a){return this.getFlagPayloads()[a]}},{key:"isFeatureEnabled",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(a,b);bg.warn('isFeatureEnabled for key "'+a+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(a){this.featureFlagEventHandlers.push(a)}},{key:"removeFeatureFlagsHandler",value:function(a){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(b){return b!==a})}},{key:"receivedFeatureFlags",value:function(a){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var b=this.getFlagVariants(),c=this.getFlagPayloads();(function(e,b){var j=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},k=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{},a=e.featureFlags,l=e.featureFlagPayloads;if(a){if(a2(a)){var f,i={};if(a)for(var g=0;g<a.length;g++)i[a[g]]=!0;b&&b.register((aR(f={},bS,a),aR(f,R,i),f))}else{var c,d=a,h=l;e.errorsWhileComputingFlags&&(d=r(r({},j),d),h=r(r({},k),h)),b&&b.register((aR(c={},bS,Object.keys(bV(d))),aR(c,R,d||{}),aR(c,bU,h||{}),c))}}})(a,this.instance.persistence,b,c),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(a){if(!this.instance.__loaded||!this.instance.persistence)return bg.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,!1===a)this.instance.persistence.unregister(bT);else if(a2(a)){for(var c={},b=0;b<a.length;b++)c[a[b]]=!0;this.instance.persistence.register(aR({},bT,c))}else this.instance.persistence.register(aR({},bT,a))}},{key:"onFeatureFlags",value:function(a){var e=this;if(this.addFeatureFlagsHandler(a),this.instance.decideEndpointWasHit){var b=this._prepareFeatureFlagsForCallbacks(),c=b.flags,d=b.flagVariants;a(c,d)}return function(){return e.removeFeatureFlagsHandler(a)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(a,b){var c,d,e=aR({},"$feature_enrollment/".concat(a),b);this.instance.capture("$feature_enrollment_update",{$feature_flag:a,$feature_enrollment:b,$set:e}),this.setPersonPropertiesForFlags(e,!1);var f=r(r({},this.getFlagVariants()),{},aR({},a,b));null===(c=this.instance.persistence)|| void 0===c||c.register((aR(d={},bS,Object.keys(bV(f))),aR(d,R,f),d)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(b){var d=this,c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],a=this.instance.get_property(S);if(a&&!c)return b(a);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(e){var a,c=e.earlyAccessFeatures;return null===(a=d.instance.persistence)|| void 0===a||a.register(aR({},S,c)),b(c)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var a=this.getFlags(),b=this.getFlagVariants();return{flags:a.filter(function(a){return b[a]}),flagVariants:Object.keys(b).filter(function(a){return b[a]}).reduce(function(a,c){return a[c]=b[c],a},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var a=this._prepareFeatureFlagsForCallbacks(),b=a.flags,c=a.flagVariants;this.featureFlagEventHandlers.forEach(function(a){return a(b,c)})}},{key:"setPersonPropertiesForFlags",value:function(a){var b=!(arguments.length>1&& void 0!==arguments[1])||arguments[1],c=this.instance.get_property(T)||{};this.instance.register(aR({},T,r(r({},c),a))),b&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(T)}},{key:"setGroupPropertiesForFlags",value:function(b){var c=!(arguments.length>1&& void 0!==arguments[1])||arguments[1],a=this.instance.get_property(U)||{};0!==Object.keys(a).length&&Object.keys(a).forEach(function(c){a[c]=r(r({},a[c]),b[c]),delete b[c]}),this.instance.register(aR({},U,r(r({},a),b))),c&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(a){if(a){var b=this.instance.get_property(U)||{};this.instance.register(aR({},U,r(r({},b),{},aR({},a,{}))))}else this.instance.unregister(U)}}]),a}();Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Number.isInteger||(Number.isInteger=function(a){return a9(a)&&isFinite(a)&&Math.floor(a)===a});var bX="0123456789abcdef",bY=function(){function a(b){if(aP(this,a),this.bytes=b,16!==b.length)throw TypeError("not 128-bit length")}return s(a,[{key:"toString",value:function(){for(var b="",a=0;a<this.bytes.length;a++)b=b+bX.charAt(this.bytes[a]>>>4)+bX.charAt(15&this.bytes[a]),3!==a&&5!==a&&7!==a&&9!==a||(b+="-");if(36!==b.length)throw Error("Invalid UUIDv7 was generated");return b}},{key:"clone",value:function(){return new a(this.bytes.slice(0))}},{key:"equals",value:function(a){return 0===this.compareTo(a)}},{key:"compareTo",value:function(c){for(var a=0;a<16;a++){var b=this.bytes[a]-c.bytes[a];if(0!==b)return Math.sign(b)}return 0}}],[{key:"fromFieldsV7",value:function(c,f,d,e){if(!Number.isInteger(c)||!Number.isInteger(f)||!Number.isInteger(d)||!Number.isInteger(e)||c<0||f<0||d<0||e<0||c>0xffffffffffff||f>4095||d>1073741823||e>4294967295)throw RangeError("invalid field value");var b=new Uint8Array(16);return b[0]=c/1099511627776,b[1]=c/4294967296,b[2]=c/16777216,b[3]=c/65536,b[4]=c/256,b[5]=c,b[6]=112|f>>>8,b[7]=f,b[8]=128|d>>>24,b[9]=d>>>16,b[10]=d>>>8,b[11]=d,b[12]=e>>>24,b[13]=e>>>16,b[14]=e>>>8,b[15]=e,new a(b)}}]),a}(),bZ=function(){function a(){aP(this,a),aR(this,"timestamp",0),aR(this,"counter",0),aR(this,"random",new b_)}return s(a,[{key:"generate",value:function(){var a=this.generateOrAbort();if(L(a)){this.timestamp=0;var b=this.generateOrAbort();if(L(b))throw Error("Could not generate UUID after timestamp reset");return b}return a}},{key:"generateOrAbort",value:function(){var a=Date.now();if(a>this.timestamp)this.timestamp=a,this.resetCounter();else{if(!(a+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return bY.fromFieldsV7(this.timestamp,Math.trunc(this.counter/1073741824),1073741823&this.counter,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),a}(),$=function(a){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var b=0;b<a.length;b++)a[b]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return a};d&&!L(d.crypto)&&crypto.getRandomValues&&($=function(a){return crypto.getRandomValues(a)});var b$,c,b_=function(){function a(){aP(this,a),aR(this,"buffer",new Uint32Array(8)),aR(this,"cursor",1/0)}return s(a,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&($(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),a}(),b0=function(){return b1().toString()},b1=function(){return(b$||(b$=new bZ)).generate()},b2="Thu, 01 Jan 1970 00:00:00 GMT",b3="",b4=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,b5=function(b){var a=b.match(b4);return a?a[0]:""},b6={is_supported:function(){return!!bd},error:function(a){bg.error("cookieStore error: "+a)},get:function(e){if(bd){try{for(var c=e+"=",d=bd.cookie.split(";").filter(function(a){return a.length}),b=0;b<d.length;b++){for(var a=d[b];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(c))return decodeURIComponent(a.substring(c.length,a.length))}}catch(f){}return null}},parse:function(b){var a;try{a=JSON.parse(b6.get(b))||{}}catch(c){}return a},set:function(f,g,c,h,i){if(bd)try{var d="",e="",j=function(c,d){if(d){var a=function(b){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:bd;if(b3)return b3;if(!a||["localhost","127.0.0.1"].includes(b))return"";for(var c=b.split("."),d=Math.min(c.length,8),e="dmn_chk_"+b0(),h=RegExp("(^|;)\\s*"+e+"=1");!b3&&d--;){var f=c.slice(d).join("."),g=e+"=1;domain=."+f;a.cookie=g,h.test(a.cookie)&&(a.cookie=g+";expires="+b2,b3=f)}return b3}(c);if(!a){var b=b5(c);b!==a&&bg.info("Warning: cookie subdomain discovery mismatch",b,a),a=b}return a?"; domain=."+a:""}return""}(bd.location.hostname,h);if(c){var b=new Date;b.setTime(b.getTime()+24*c*36e5),d="; expires="+b.toUTCString()}i&&(e="; secure");var a=f+"="+encodeURIComponent(JSON.stringify(g))+d+"; SameSite=Lax; path=/"+j+e;return a.length>3686.4&&bg.warn("cookieStore warning: large cookie, len="+a.length),bd.cookie=a,a}catch(k){return}},remove:function(a,b){try{b6.set(a,"",-1,b)}catch(c){return}}},b7=null,_={is_supported:function(){if(!a8(b7))return b7;var a=!0;if(L(d))a=!1;else try{var b="__mplssupport__";_.set(b,"xyz"),'"xyz"'!==_.get(b)&&(a=!1),_.remove(b)}catch(c){a=!1}return a||bg.error("localStorage unsupported; falling back to cookie store"),b7=a,a},error:function(a){bg.error("localStorage error: "+a)},get:function(a){try{return null==d?void 0:d.localStorage.getItem(a)}catch(b){_.error(b)}return null},parse:function(a){try{return JSON.parse(_.get(a))||{}}catch(b){}return null},set:function(a,b){try{null==d||d.localStorage.setItem(a,JSON.stringify(b))}catch(c){_.error(c)}},remove:function(a){try{null==d||d.localStorage.removeItem(a)}catch(b){_.error(b)}}},b8=["distinct_id",w,Q],b9=r(r({},_),{},{parse:function(a){try{var b={};try{b=b6.parse(a)||{}}catch(d){}var c=bl(b,JSON.parse(_.get(a)||"{}"));return _.set(a,c),c}catch(e){}return null},set:function(a,c,d,e,f){try{_.set(a,c);var b={};b8.forEach(function(a){c[a]&&(b[a]=c[a])}),Object.keys(b).length&&b6.set(a,b,d,e,f)}catch(g){_.error(g)}},remove:function(a,b){try{null==d||d.localStorage.removeItem(a),b6.remove(a,b)}catch(c){_.error(c)}}}),ca={},cb={is_supported:function(){return!0},error:function(a){bg.error("memoryStorage error: "+a)},get:function(a){return ca[a]||null},parse:function(a){return ca[a]||null},set:function(a,b){ca[a]=b},remove:function(a){delete ca[a]}},cc=null,cd={is_supported:function(){if(!a8(cc))return cc;if(cc=!0,L(d))cc=!1;else try{var a="__support__";cd.set(a,"xyz"),'"xyz"'!==cd.get(a)&&(cc=!1),cd.remove(a)}catch(b){cc=!1}return cc},error:function(a){bg.error("sessionStorage error: ",a)},get:function(a){try{return null==d?void 0:d.sessionStorage.getItem(a)}catch(b){cd.error(b)}return null},parse:function(a){try{return JSON.parse(cd.get(a))||null}catch(b){}return null},set:function(a,b){try{null==d||d.sessionStorage.setItem(a,JSON.stringify(b))}catch(c){cd.error(c)}},remove:function(a){try{null==d||d.sessionStorage.removeItem(a)}catch(b){cd.error(b)}}},ce=["localhost","127.0.0.1"],cf=function(b){var a=null==bd?void 0:bd.createElement("a");return L(a)?null:(a.href=b,a)},cg=function(b,a){return!!function(a){try{RegExp(a)}catch(b){return!1}return!0}(a)&&RegExp(a).test(b)},ch=function(f,g){for(var a,d=((f.split("#")[0]||"").split("?")[1]||"").split("&"),c=0;c<d.length;c++){var e=d[c].split("=");if(e[0]===g){a=e;break}}if(!a2(a)||a.length<2)return"";var b=a[1];try{b=decodeURIComponent(b)}catch(h){bg.error("Skipping decoding for malformed query param: "+b)}return b.replace(/\+/g," ")},y=function(b,c){var a=b.match(RegExp(c+"=([^&]*)"));return a?a[1]:null},ci={campaignParams:function(a){var b=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(a||[]),c={};return bk(b,function(a){var b=bd?ch(bd.URL,a):"";b.length&&(c[a]=b)}),c},searchEngine:function(){var a=null==bd?void 0:bd.referrer;return a?0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":null:null},searchInfo:function(){var a=ci.searchEngine(),d="yahoo"!=a?"q":"p",b={};if(!a8(a)){b.$search_engine=a;var c=bd?ch(bd.referrer,d):"";c.length&&(b.ph_keyword=c)}return b},browser:function(a,b,d){var c;return b=b||"",d||bm(a," OPR/")?bm(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":bm(a,"IEMobile")||bm(a,"WPDesktop")?"Internet Explorer Mobile":bm(a,"SamsungBrowser/")?"Samsung Internet":bm(a,"Edge")||bm(a,"Edg/")?"Microsoft Edge":bm(a,"FBIOS")?"Facebook Mobile":bm(a,"Chrome")?"Chrome":bm(a,"CriOS")?"Chrome iOS":bm(a,"UCWEB")||bm(a,"UCBrowser")?"UC Browser":bm(a,"FxiOS")?"Firefox iOS":bm(b,"Apple")||bm(c=a,"Safari")&&!bm(c,"Chrome")&&!bm(c,"Android")?bm(a,"Mobile")?"Mobile Safari":"Safari":bm(a,"Android")?"Android Mobile":bm(a,"Konqueror")||bm(a,"konqueror")?"Konqueror":bm(a,"Firefox")?"Firefox":bm(a,"MSIE")||bm(a,"Trident/")?"Internet Explorer":bm(a,"Gecko")?"Mozilla":""},browserVersion:function(d,e,f){var a={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[ci.browser(d,e,f)];if(L(a))return null;for(var b=0;b<a.length;b++){var g=a[b],c=d.match(g);if(c)return parseFloat(c[c.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(a){if(/Windows/i.test(a)){if(/Phone/.test(a)||/WPDesktop/.test(a))return{os_name:"Windows Phone",os_version:""};var e=/Windows NT ([0-9.]+)/i.exec(a);return e&&e[1]?{os_name:"Windows",os_version:e[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(a)){var b=/OS (\d+)_(\d+)_?(\d+)?/i.exec(a);return b&&b[1]?{os_name:"iOS",os_version:[b[1],b[2],b[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(a)){var c=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(a);return c&&c[1]?{os_name:"Android",os_version:[c[1],c[2],c[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(a))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(a)){var d=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(a);return d&&d[1]?{os_name:"Mac OS X",os_version:[d[1],d[2],d[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(a)?{os_name:"Linux",os_version:""}:/CrOS/.test(a)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(a){return/Windows Phone/i.test(a)||/WPDesktop/.test(a)?"Windows Phone":/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Android/.test(a)&&!/Mobile/.test(a)?"Android Tablet":/Android/.test(a)?"Android":""},deviceType:function(b){var a=this.device(b);return"iPad"===a||"Android Tablet"===a?"Tablet":a?"Mobile":"Desktop"},referrer:function(){return(null==bd?void 0:bd.referrer)||"$direct"},referringDomain:function(){var a;return null!=bd&&bd.referrer&&(null===(a=cf(bd.referrer))|| void 0===a?void 0:a.host)||"$direct"},properties:function(){if(!l)return{};var a=ci.os(l),b=a.os_name,c=a.os_version;return bl(br({$os:b,$os_version:c,$browser:ci.browser(l,navigator.vendor,be.opera),$device:ci.device(l),$device_type:ci.deviceType(l)}),{$current_url:null==d?void 0:d.location.href,$host:null==d?void 0:d.location.host,$pathname:null==d?void 0:d.location.pathname,$raw_user_agent:l.length>1e3?l.substring(0,997)+"...":l,$browser_version:ci.browserVersion(l,navigator.vendor,be.opera),$browser_language:ci.browserLanguage(),$screen_height:null==d?void 0:d.screen.height,$screen_width:null==d?void 0:d.screen.width,$viewport_height:null==d?void 0:d.innerHeight,$viewport_width:null==d?void 0:d.innerWidth,$lib:"web",$lib_version:a_.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:bo()/1e3})},people_properties:function(){if(!l)return{};var a=ci.os(l),b=a.os_name,c=a.os_version;return bl(br({$os:b,$os_version:c,$browser:ci.browser(l,navigator.vendor,be.opera)}),{$browser_version:ci.browserVersion(l,navigator.vendor,be.opera)})}},cj=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],ck=function(){function a(b){aP(this,a);var d="";b.token&&(d=b.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=b.custom_campaign_params||[],b.persistence_name?this.name="ph_"+b.persistence_name:this.name="ph_"+d+"_posthog",-1===cj.indexOf(b.persistence.toLowerCase())&&(bg.critical("Unknown persistence type "+b.persistence+"; falling back to localStorage+cookie"),b.persistence="localStorage+cookie");var c=b.persistence.toLowerCase();"localstorage"===c&&_.is_supported()?this.storage=_:"localstorage+cookie"===c&&b9.is_supported()?this.storage=b9:"sessionstorage"===c&&cd.is_supported()?this.storage=cd:"memory"===c?this.storage=cb:"cookie"===c?this.storage=b6:b9.is_supported()?this.storage=b9:this.storage=b6,this.load(),this.update_config(b),this.save()}return s(a,[{key:"properties",value:function(){var a={};return bk(this.props,function(b,e){if(e===R&&a5(b))for(var c,h,f,g=Object.keys(b),d=0;d<g.length;d++)a["$feature/".concat(g[d])]=b[g[d]];else h=e,f=!1,(a8(c=bQ)?f:bc&&c.indexOf===bc?-1!=c.indexOf(h):(bk(c,function(a){if(f||(f=a===h))return bh}),f))||(a[e]=b)}),a}},{key:"load",value:function(){if(!this.disabled){var a=this.storage.parse(this.name);a&&(this.props=bl({},a))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(a,b,c){var e=this;if(a5(a)){L(b)&&(b="None"),this.expire_days=L(c)?this.default_expiry:c;var d=!1;if(bk(a,function(c,a){e.props.hasOwnProperty(a)&&e.props[a]!==b||(e.props[a]=c,d=!0)}),d)return this.save(),!0}return!1}},{key:"register",value:function(a,b){var d=this;if(a5(a)){this.expire_days=L(b)?this.default_expiry:b;var c=!1;if(bk(a,function(e,b){a.hasOwnProperty(b)&&d.props[b]!==e&&(d.props[b]=e,c=!0)}),c)return this.save(),!0}return!1}},{key:"unregister",value:function(a){a in this.props&&(delete this.props[a],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(ci.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(ci.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||ci.referrer(),$referring_domain:this.props.$referring_domain||ci.referringDomain()})}},{key:"get_referrer_info",value:function(){return br({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(a){return bk(this.props,function(c,b){b in a||(a[b]=c)}),a}},{key:"update_config",value:function(a){this.default_expiry=this.expire_days=a.cookie_expiration,this.set_disabled(a.disable_persistence),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie)}},{key:"set_disabled",value:function(a){this.disabled=a,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(a){a!==this.cross_subdomain&&(this.cross_subdomain=a,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(a){a!==this.secure&&(this.secure=a,this.remove(),this.save())}},{key:"set_event_timer",value:function(b,c){var a=this.props[O]||{};a[b]=c,this.props[O]=a,this.save()}},{key:"remove_event_timer",value:function(a){var b=(this.props[O]||{})[a];return L(b)||(delete this.props[O][a],this.save()),b}},{key:"get_user_state",value:function(){return this.props[X]||"anonymous"}},{key:"set_user_state",value:function(a){this.props[X]=a,this.save()}},{key:"get_quota_limits",value:function(){return this.props[Y]||{}}},{key:"set_quota_limits",value:function(a){this.props[Y]=a,this.save()}}]),a}(),cl=2,cm=4,cn=3,co=6,cp=0,cq="rrweb/console@1",cr=s(function c(d){var a,b,f=this,e=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};aP(this,c),aR(this,"bucketSize",100),aR(this,"refillRate",10),aR(this,"mutationBuckets",{}),aR(this,"loggedTracker",{}),aR(this,"refillBuckets",function(){Object.keys(f.mutationBuckets).forEach(function(a){f.mutationBuckets[a]=f.mutationBuckets[a]+f.refillRate,f.mutationBuckets[a]>=f.bucketSize&&delete f.mutationBuckets[a]})}),aR(this,"getNodeOrRelevantParent",function(c){var a=f.rrweb.mirror.getNode(c);if("svg"!==(null==a?void 0:a.nodeName)&&a instanceof Element){var b=a.closest("svg");if(b)return[f.rrweb.mirror.getId(b),b]}return[c,a]}),aR(this,"numberOfChanges",function(a){var b,c,d,e,f,g,h,i;return(null!==(b=null===(c=a.removes)|| void 0===c?void 0:c.length)&& void 0!==b?b:0)+(null!==(d=null===(e=a.attributes)|| void 0===e?void 0:e.length)&& void 0!==d?d:0)+(null!==(f=null===(g=a.texts)|| void 0===g?void 0:g.length)&& void 0!==f?f:0)+(null!==(h=null===(i=a.adds)|| void 0===i?void 0:i.length)&& void 0!==h?h:0)}),aR(this,"throttleMutations",function(a){if(a.type!==cn||a.data.source!==cp)return a;var b=a.data,d=f.numberOfChanges(b);b.attributes&&(b.attributes=b.attributes.filter(function(d){var b,c,e,g=aW(f.getNodeOrRelevantParent(d.id),2),a=g[0],h=g[1];return 0!==f.mutationBuckets[a]&&(f.mutationBuckets[a]=null!==(b=f.mutationBuckets[a])&& void 0!==b?b:f.bucketSize,f.mutationBuckets[a]=Math.max(f.mutationBuckets[a]-1,0),0===f.mutationBuckets[a]&&(f.loggedTracker[a]||(f.loggedTracker[a]=!0,null===(c=(e=f.options).onBlockedNode)|| void 0===c||c.call(e,a,h))),d)}));var c=f.numberOfChanges(b);return 0!==c||d===c?a:void 0}),this.rrweb=d,this.options=e,this.refillRate=null!==(a=this.options.refillRate)&& void 0!==a?a:this.refillRate,this.bucketSize=null!==(b=this.options.bucketSize)&& void 0!==b?b:this.bucketSize,setInterval(function(){f.refillBuckets()},1e3)}),aa=((c=aa||{})[c.DomContentLoaded=0]="DomContentLoaded",c[c.Load=1]="Load",c[c.FullSnapshot=2]="FullSnapshot",c[c.IncrementalSnapshot=3]="IncrementalSnapshot",c[c.Meta=4]="Meta",c[c.Custom=5]="Custom",c[c.Plugin=6]="Plugin",c),cs={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(a){return a},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},ct=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],cu=["/s/","/e/","/i/vo/e/"];function cv(c,a,d,e){var b=null==a?void 0:a["content-length"];return b&&parseInt(b)>d?"".concat(e," body too large to record"):c}var f,a,cw=function(b,c){var k,d,g,a=b.session_recording,h=!1!==a.recordHeaders&&c.recordHeaders,i=!1!==a.recordBody&&c.recordBody,e=!1!==a.recordPerformance&&c.recordPerformance,l=(g=Math.min(1e6,null!==(d=a.payloadSizeLimitBytes)&& void 0!==d?d:1e6),function(a){return null!=a&&a.requestBody&&(a.requestBody=cv(a.requestBody,a.requestHeaders,g,"Request")),null!=a&&a.responseBody&&(a.responseBody=cv(a.responseBody,a.responseHeaders,g,"Response")),a}),j=function(c){var b,a;return l(function(b){var a=cf(b.name);if(!(a&&a.pathname&&cu.includes(a.pathname)))return b}((Object.keys(null!==(a=(b=c).requestHeaders)&& void 0!==a?a:{}).forEach(function(c){var a;ct.includes(c.toLowerCase())&&(null===(a=b.requestHeaders)|| void 0===a||delete a[c])}),b)))},f=a4(b.session_recording.maskNetworkRequestFn);return f&&a4(b.session_recording.maskCapturedNetworkRequestFn)&&bg.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),f&&(b.session_recording.maskCapturedNetworkRequestFn=function(a){var c=b.session_recording.maskNetworkRequestFn({url:a.name});return r(r({},a),{},{name:null==c?void 0:c.url})}),a.maskRequestFn=a4(b.session_recording.maskCapturedNetworkRequestFn)?function(f){var a,c,d,e=j(f);return e&&null!==(a=null===(c=(d=b.session_recording).maskCapturedNetworkRequestFn)|| void 0===c?void 0:c.call(d,e))&& void 0!==a?a:void 0}:void 0,a.maskRequestFn||(a.maskRequestFn=j),r(r(r({},cs),a),{},{recordHeaders:h,recordBody:i,recordPerformance:e,recordInitialRequests:e})},cx="/s/",cy=3e5;(a=f||(f={}))[a.Mutation=0]="Mutation",a[a.MouseMove=1]="MouseMove",a[a.MouseInteraction=2]="MouseInteraction",a[a.Scroll=3]="Scroll",a[a.ViewportResize=4]="ViewportResize",a[a.Input=5]="Input",a[a.TouchMove=6]="TouchMove",a[a.MediaInteraction=7]="MediaInteraction",a[a.StyleSheetRule=8]="StyleSheetRule",a[a.CanvasMutation=9]="CanvasMutation",a[a.Font=10]="Font",a[a.Log=11]="Log",a[a.Drag=12]="Drag",a[a.StyleDeclaration=13]="StyleDeclaration",a[a.Selection=14]="Selection",a[a.AdoptedStyleSheet=15]="AdoptedStyleSheet";var cz=[f.MouseMove,f.MouseInteraction,f.Scroll,f.ViewportResize,f.Input,f.TouchMove,f.MediaInteraction,f.Drag],cA=function(){function a(b){var c=this;if(aP(this,a),aR(this,"isIdle",!1),aR(this,"_linkedFlagSeen",!1),aR(this,"_lastActivityTimestamp",Date.now()),aR(this,"windowId",null),aR(this,"sessionId",null),aR(this,"_linkedFlag",null),aR(this,"_sampleRate",null),aR(this,"_minimumDuration",null),aR(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=b,this._captureStarted=!1,this._endpoint=cx,this.stopRrweb=void 0,this.receivedDecide=!1,null==d||d.addEventListener("beforeunload",function(){c._flushBuffer()}),!this.instance.sessionManager)throw bg.error("Session recording started without valid sessionManager"),Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return s(a,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw bg.error("Session recording started without valid sessionManager"),Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return a9(this._sampleRate)?this.instance.get_property(Q):null}},{key:"sessionDuration",get:function(){var a,b,c=null===(a=this.buffer)|| void 0===a?void 0:a.data[(null===(b=this.buffer)|| void 0===b?void 0:b.data.length)-1],d=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return c?c.timestamp-d:null}},{key:"isRecordingEnabled",get:function(){var a=!!this.instance.get_property(P),b=!this.instance.config.disable_session_recording;return d&&a&&b}},{key:"isConsoleLogCaptureEnabled",get:function(){var b=!!this.instance.get_property(bN),a=this.instance.config.enable_recording_console_log;return null!=a?a:b}},{key:"recordingVersion",get:function(){var a,b=this.instance.get_property(bO);return(null===(a=this.instance.config.session_recording)|| void 0===a?void 0:a.recorderVersion)||b||"v1"}},{key:"networkPayloadCapture",get:function(){var c,d,a=this.instance.get_property(bP),b={recordHeaders:null===(c=this.instance.config.session_recording)|| void 0===c?void 0:c.recordHeaders,recordBody:null===(d=this.instance.config.session_recording)|| void 0===d?void 0:d.recordBody},e=(null==b?void 0:b.recordHeaders)||(null==a?void 0:a.recordHeaders),f=(null==b?void 0:b.recordBody)||(null==a?void 0:a.recordBody),g=this.instance.config.capture_performance||(null==a?void 0:a.capturePerformance);return e||f||g?{recordHeaders:e,recordBody:f,recordPerformance:g}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?a7(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":ba(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(c){var a,b,f=this.sessionId!==c;if(a9(this._sampleRate)){var d,e=this.isSampled;(d=f||!ba(e)?Math.random()<this._sampleRate:e)||bg.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(c,") will not be sent to the server.")),null===(b=this.instance.persistence)|| void 0===b||b.register(aR({},Q,d))}else null===(a=this.instance.persistence)|| void 0===a||a.register(aR({},Q,null))}},{key:"afterDecideResponse",value:function(a){var c,d,e,f,g,h,i,b,m=this;this.instance.persistence&&this.instance.persistence.register((aR(b={},P,!!a.sessionRecording),aR(b,bN,null===(g=a.sessionRecording)|| void 0===g?void 0:g.consoleLogRecordingEnabled),aR(b,bO,null===(h=a.sessionRecording)|| void 0===h?void 0:h.recorderVersion),aR(b,bP,r({capturePerformance:a.capturePerformance},null===(i=a.sessionRecording)|| void 0===i?void 0:i.networkPayloadCapture)),b));var j=null===(c=a.sessionRecording)|| void 0===c?void 0:c.sampleRate;this._sampleRate=L(j)||a8(j)?null:parseFloat(j);var k,l=null===(d=a.sessionRecording)|| void 0===d?void 0:d.minimumDurationMilliseconds;if(this._minimumDuration=L(l)?null:l,this._linkedFlag=(null===(e=a.sessionRecording)|| void 0===e?void 0:e.linkedFlag)||null,null!==(f=a.sessionRecording)&& void 0!==f&&f.endpoint&&(this._endpoint=null===(k=a.sessionRecording)|| void 0===k?void 0:k.endpoint),a9(this._sampleRate)&&this.sessionManager.onSessionId(function(a){m.makeSamplingDecision(a)}),a7(this._linkedFlag)){var n=this._linkedFlag;this.instance.onFeatureFlags(function(a){m._linkedFlagSeen=a.includes(n)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(b){var a,c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"log";null===(a=this.instance.sessionRecording)|| void 0===a||a.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:c,trace:[],payload:[JSON.stringify(b)]}},timestamp:bo()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var b=this;if(!L(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var a="v2"===this.recordingVersion?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?bw(this.instance.config.api_host+"/static/".concat(a,"?v=").concat(a_.LIB_VERSION),function(c){if(c)return bg.error("Could not load ".concat(a),c);b._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(b){var a;return b.type===cn&& -1!==cz.indexOf(null===(a=b.data)|| void 0===a?void 0:a.source)}},{key:"_updateWindowAndSessionIds",value:function(a){var b=this._isInteractiveEvent(a);b||this.isIdle||a.timestamp-this._lastActivityTimestamp>cy&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:a.timestamp-this._lastActivityTimestamp,threshold:cy}));var c=!1;if(b&&(this._lastActivityTimestamp=a.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:a.type}),c=!0)),!this.isIdle){var d=this.sessionManager.checkAndGetSessionAndWindowId(!b,a.timestamp),e=d.windowId,f=d.sessionId,g=this.sessionId!==f,h=this.windowId!==e;this.windowId=e,this.sessionId=f,(c|| -1===[cl,cm].indexOf(a.type)&&(h||g))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRwebMethod",value:function(a){if(!this._captureStarted)return!1;try{return a(),!0}catch(b){return bg.error("[Session-Recording] using rrweb when not started.",b),!1}}},{key:"_tryAddCustomEvent",value:function(a,b){var c=this;return this._tryRRwebMethod(function(){var d;return null===(d=c.rrwebRecord)|| void 0===d?void 0:d.addCustomEvent(a,b)})}},{key:"_tryTakeFullSnapshot",value:function(){var a=this;return this._tryRRwebMethod(function(){var b;return null===(b=a.rrwebRecord)|| void 0===b?void 0:b.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){var b,k=this,a={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=d.rrweb?d.rrweb.record:d.rrwebRecord;for(var i=this.instance.config.session_recording,c=0,e=Object.entries(i||{});c<e.length;c++){var f=aW(e[c],2),g=f[0],j=f[1];g in a&&(a[g]=j)}if(this.rrwebRecord){this.mutationRateLimiter=null!==(b=this.mutationRateLimiter)&& void 0!==b?b:new cr(this.rrwebRecord,{onBlockedNode:function(b,c){var a="Too many mutations on node '".concat(b,"'. Rate limiting. This could be due to SVG animations or something similar");bg.info(a,{node:c}),k.log("[PostHog Recorder] "+a,"warn")}});var h=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(r({emit:function(a){k.onRRwebEmit(a)},plugins:h},a)),this.instance._addCaptureHook(function(b){try{if("$pageview"===b){var a=d?k._maskUrl(d.location.href):"";if(!a)return;k._tryAddCustomEvent("$pageview",{href:a})}}catch(c){bg.error("Could not add $pageview to rrweb session",c)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:a,activePlugins:h.map(function(a){return null==a?void 0:a.name})})}else bg.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var a=[];return be.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&a.push(be.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&a4(be.getRecordNetworkPlugin)&&(!ce.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?a.push(be.getRecordNetworkPlugin(cw(this.instance.config,this.networkPayloadCapture))):bg.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),a}},{key:"onRRwebEmit",value:function(a){if(a&&a5(a)){if(a.type===aa.Meta){var c=this._maskUrl(a.data.href);if(!c)return;a.data.href=c}var d=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(a):a;if(d){var b=function(c){var a=c;if(a&&a5(a)&&a.type===co&&a5(a.data)&&a.data.plugin===cq){a.data.payload.payload.length>10&&(a.data.payload.payload=a.data.payload.payload.slice(0,10),a.data.payload.payload.push("...[truncated]"));for(var d=[],b=0;b<a.data.payload.payload.length;b++)a.data.payload.payload[b]&&a.data.payload.payload[b].length>2e3?d.push(a.data.payload.payload[b].slice(0,2e3)+"...[truncated]"):d.push(a.data.payload.payload[b]);return a.data.payload.payload=d,c}return c}(d),e=JSON.stringify(b).length;if(this._updateWindowAndSessionIds(b),!this.isIdle){var f={$snapshot_bytes:e,$snapshot_data:b,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(f):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(b){var c=this.instance.config.session_recording;if(c.maskNetworkRequestFn){var a,d={url:b};return null===(a=d=c.maskNetworkRequestFn(d))|| void 0===a?void 0:a.url}return b}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var b=this._minimumDuration,a=this.sessionDuration,c=a9(a)&&a>=0,d=a9(b)&&c&&a<b;return"buffering"===this.status||d?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&0!==this.buffer.data.length?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(a){var b,d=this,c=2+((null===(b=this.buffer)|| void 0===b?void 0:b.data.length)||0);(!this.buffer||this.buffer.size+a.$snapshot_bytes+c>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),a8(this.buffer.sessionId)&&!a8(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=a.$snapshot_bytes,this.buffer.data.push(a.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){d._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(a){this.instance.capture("$snapshot",a,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:a.$snapshot_data.type===cl}})}}]),a}(),cB=function(){function a(b){aP(this,a),this.instance=b,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return s(a,[{key:"call",value:function(){var b=this,a=bt(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(T),group_properties:this.instance.get_property(U),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:a,verbose:!0},{method:"POST"},function(a){return b.parseDecideResponse(a)})}},{key:"parseDecideResponse",value:function(a){var c,j=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),0!==(null==a?void 0:a.status)){if(!bd||!bd.body)return bg.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){j.parseDecideResponse(a)},500);this.instance.toolbar.afterDecideResponse(a),null===(c=this.instance.sessionRecording)|| void 0===c||c.afterDecideResponse(a),x.afterDecideResponse(a,this.instance),this.instance._afterDecideResponse(a),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(a);var e=null==d?void 0:d.extendPostHogWithSurveys;a.surveys&&!e&&bw(this.instance.config.api_host+"/static/surveys.js",function(a){if(a)return bg.error("Could not load surveys script",a);d.extendPostHogWithSurveys(j.instance)});var f=null==d?void 0:d.extendPostHogWithExceptionAutoCapture;if(a.autocaptureExceptions&&a.autocaptureExceptions&&L(f)&&bw(this.instance.config.api_host+"/static/exception-autocapture.js",function(b){if(b)return bg.error("Could not load exception autocapture script",b);d.extendPostHogWithExceptionAutocapture(j.instance,a)}),a.siteApps){if(this.instance.config.opt_in_site_apps){var g,k=this.instance.config.api_host,b=a$(a.siteApps);try{var h=function(){var b=g.value,c=b.id,a=b.url,d=[k,"/"===k[k.length-1]&&"/"===a[0]?a.substring(1):a].join("");be["__$$ph_site_app_".concat(c)]=j.instance,bw(d,function(a){a&&bg.error("Error while initializing PostHog app with config id ".concat(c),a)})};for(b.s();!(g=b.n()).done;)h()}catch(i){b.e(i)}finally{b.f()}}else a.siteApps.length>0&&bg.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}else bg.error("Failed to fetch feature flags from PostHog.")}}]),a}(),cC=["https://app.posthog.com","https://eu.posthog.com"],cD=["source"],cE=null!=d&&d.location?y(d.location.hash,"__posthog")||y(location.hash,"state"):null,cF=function(){function a(b){aP(this,a),this.instance=b}return s(a,[{key:"afterDecideResponse",value:function(a){var b=a.toolbarParams||a.editorParams||(a.toolbarVersion?{toolbarVersion:a.toolbarVersion}:{});a.isAuthenticated&&b.toolbarVersion&&0===b.toolbarVersion.indexOf("toolbar")&&this.loadToolbar(r({},b))}},{key:"maybeLoadToolbar",value:function(){var f,g,a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:void 0,h=arguments.length>1&& void 0!==arguments[1]?arguments[1]:void 0,e=arguments.length>2&& void 0!==arguments[2]?arguments[2]:void 0;if(!d||!bd)return!1;a=null!==(f=a)&& void 0!==f?f:d.location,e=null!==(g=e)&& void 0!==g?g:d.history;try{if(!h){try{d.localStorage.setItem("test","test"),d.localStorage.removeItem("test")}catch(j){return!1}h=null==d?void 0:d.localStorage}var b,i=cE||y(a.hash,"__posthog")||y(a.hash,"state"),c=i?bp(function(){return JSON.parse(atob(decodeURIComponent(i)))})||bp(function(){return JSON.parse(decodeURIComponent(i))}):null;return c&&"ph_authorize"===c.action?((b=c).source="url",b&&Object.keys(b).length>0&&(c.desiredHash?a.hash=c.desiredHash:e?e.replaceState("",bd.title,a.pathname+a.search):a.hash="")):((b=JSON.parse(h.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete b.userIntent),!(!b.token||this.instance.config.token!==b.token)&&(this.loadToolbar(b),!0)}catch(k){return!1}}},{key:"loadToolbar",value:function(e){var j=this;if(!d||be._postHogToolbarLoaded)return!1;be._postHogToolbarLoaded=!0;var a=this.instance.config.api_host,b=3e5,f=Math.floor(Date.now()/b)*b,g="".concat(a).concat(a.endsWith("/")?"":"/","static/toolbar.js?t=").concat(f),h=!cC.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,c=r(r({token:this.instance.config.token},e),{},{apiURL:a},h?{instrument:!1}:{});c.source;var i=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],d.indexOf(b)>=0||Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(c,cD);return d.localStorage.setItem("_postHogToolbarParams",JSON.stringify(i)),bw(g,function(a){a?bg.error("Failed to load toolbar",a):(be.ph_load_toolbar||be.ph_load_editor)(c,j.instance)}),bv(d,"turbolinks:load",function(){be._postHogToolbarLoaded=!1,j.loadToolbar(c)}),!0}},{key:"_loadEditor",value:function(a){return this.loadToolbar(a)}},{key:"maybeLoadEditor",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:void 0,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:void 0,c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(a,b,c)}}]),a}(),cG="__ph_opt_in_out_";function cH(a,b){cP(!0,a,b)}function cI(a,b){cP(!1,a,b)}function cJ(a,b){return"1"===cO(a,b)}function cK(b,a){return!!function(a){if(a&&a.respectDnt){var b=a&&a.window||d,c=null==b?void 0:b.navigator,e=!1;return bk([null==c?void 0:c.doNotTrack,c.msDoNotTrack,b.doNotTrack],function(a){bm([!0,1,"1","yes"],a)&&(e=!0)}),e}return!1}(a)||"0"===cO(b,a)}function cL(b,a){cM(a=a||{}).remove(cN(b,a),!!a.crossSubdomainCookie)}function cM(a){return"localStorage"===(a=a||{}).persistenceType?_:"localStorage+cookie"===a.persistenceType?b9:b6}function cN(b,a){return((a=a||{}).persistencePrefix||cG)+b}function cO(b,a){return cM(a).get(cN(b,a))}function cP(b,c,a){a7(c)&&c.length?(cM(a=a||{}).set(cN(c,a),b?1:0,a9(a.cookieExpiration)?a.cookieExpiration:null,a.crossSubdomainCookie,a.secureCookie),a.capture&&b&&a.capture(a.captureEventName||"$opt_in",a.captureProperties||{},{send_instantly:!0})):bg.error("gdpr."+(b?"optIn":"optOut")+" called with an invalid token")}var cQ=function(){function a(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:3e3;aP(this,a),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=b}return s(a,[{key:"setPollInterval",value:function(a){this._pollInterval=a,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return(new Date).getTime()}}]),a}(),cR=function(b){aS(a,cQ);var c=aV(a);function a(d){var b,e=arguments.length>1&& void 0!==arguments[1]?arguments[1]:3e3;return aP(this,a),(b=c.call(this,e)).handlePollRequest=d,b}return s(a,[{key:"enqueue",value:function(a,b,c){this._event_queue.push({url:a,data:b,options:c}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var a=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(a._event_queue.length>0){var b=a.formatQueue(),c=function(e){var c=b[e],f=c.url,d=c.data,g=c.options;bk(d,function(c,b){d[b].offset=Math.abs(d[b].timestamp-a.getTime()),delete d[b].timestamp}),a.handlePollRequest(f,d,g)};for(var d in b)c(d);a._event_queue.length=0,a._empty_queue_count=0}else a._empty_queue_count++;a._empty_queue_count>4&&(a.isPolling=!1,a._empty_queue_count=0),a.isPolling&&a.poll()},this._pollInterval)}},{key:"unload",value:function(){var c=this;clearTimeout(this._poller);var b=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var a=Object.values(b);[].concat(aX(a.filter(function(a){return 0===a.url.indexOf("/e")})),aX(a.filter(function(a){return 0!==a.url.indexOf("/e")}))).map(function(a){var b=a.url,d=a.data,e=a.options;c.handlePollRequest(b,d,r(r({},e),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var a={};return bk(this._event_queue,function(d){var e=d.url,f=d.data,c=d.options,b=(c?c._batchKey:null)||e;L(a[b])&&(a[b]={data:[],url:e,options:c}),c&&a[b].options&&a[b].options._metrics&&!a[b].options._metrics.rrweb_full_snapshot&&(a[b].options._metrics.rrweb_full_snapshot=c._metrics.rrweb_full_snapshot),a[b].data.push(f)}),a}}]),a}(),h=Uint8Array,ab=Uint16Array,ac=Uint32Array,ad=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ae=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cS=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z=function(e,f){for(var b=new ab(31),a=0;a<31;++a)b[a]=f+=1<<e[a-1];var d=new ac(b[30]);for(a=1;a<30;++a)for(var c=b[a];c<b[a+1];++c)d[c]=c-b[a]<<5|a;return[b,d]},A=z(ad,2),af=A[0],ag=A[1];af[28]=258,ag[258]=28;for(var cT=z(ae,0)[1],ah=new ab(32768),b=0;b<32768;++b){var g=(43690&b)>>>1|(21845&b)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,ah[b]=((65280&g)>>>8|(255&g)<<8)>>>1}var B=function(b,c,j){for(var e=b.length,a=0,h=new ab(c);a<e;++a)++h[b[a]-1];var d,f=new ab(c);for(a=0;a<c;++a)f[a]=f[a-1]+h[a-1]<<1;if(j){d=new ab(1<<c);var k=15-c;for(a=0;a<e;++a)if(b[a])for(var l=a<<4|b[a],i=c-b[a],g=(f[b[a]-1]++)<<i,m=g|(1<<i)-1;g<=m;++g)d[ah[g]>>>k]=l}else for(d=new ab(e),a=0;a<e;++a)d[a]=ah[f[b[a]-1]++]>>>15-b[a];return d},i=new h(288);for(b=0;b<144;++b)i[b]=8;for(b=144;b<256;++b)i[b]=9;for(b=256;b<280;++b)i[b]=7;for(b=280;b<288;++b)i[b]=8;var C=new h(32);for(b=0;b<32;++b)C[b]=5;var D,E,cU=B(i,9,0),cV=B(C,5,0),cW=function(a){return(a/8>>0)+(7&a&&1)},cX=function(a,b,c){(null==b||b<0)&&(b=0),(null==c||c>a.length)&&(c=a.length);var d=new(a instanceof ab?ab:a instanceof ac?ac:h)(c-b);return d.set(a.subarray(b,c)),d},cY=function(b,c,a){a<<=7&c;var d=c/8>>0;b[d]|=a,b[d+1]|=a>>>8},cZ=function(b,d,a){a<<=7&d;var c=d/8>>0;b[c]|=a,b[c+1]|=a>>>8,b[c+2]|=a>>>16},c$=function(o,d){for(var b=[],a=0;a<o.length;++a)o[a]&&b.push({s:a,f:o[a]});var g=b.length,e=b.slice();if(!g)return[new h(0),0];if(1==g){var r=new h(b[0].s+1);return r[b[0].s]=1,[r,1]}b.sort(function(a,b){return a.f-b.f}),b.push({s:-1,f:25001});var i=b[0],j=b[1],k=0,m=1,n=2;for(b[0]={s:-1,f:i.f+j.f,l:i,r:j};m!=g-1;)i=b[b[k].f<b[n].f?k++:n++],j=b[k!=m&&b[k].f<b[n].f?k++:n++],b[m++]={s:-1,f:i.f+j.f,l:i,r:j};var p=e[0].s;for(a=1;a<g;++a)e[a].s>p&&(p=e[a].s);var c=new ab(p+1),l=c_(b[m-1],c,0);if(l>d){a=0;var f=0,s=l-d,v=1<<s;for(e.sort(function(a,b){return c[b.s]-c[a.s]||a.f-b.f});a<g;++a){var q=e[a].s;if(!(c[q]>d))break;f+=v-(1<<l-c[q]),c[q]=d}for(f>>>=s;f>0;){var t=e[a].s;c[t]<d?f-=1<<d-c[t]++-1:++a}for(;a>=0&&f;--a){var u=e[a].s;c[u]==d&&(--c[u],++f)}l=d}return[new h(c),l]},c_=function d(a,b,c){return -1==a.s?Math.max(d(a.l,b,c+1),d(a.r,b,c+1)):b[a.s]=c},c0=function(d){for(var b=d.length;b&&!d[--b];);for(var g=new ab(++b),h=0,e=d[0],a=1,c=function(a){g[h++]=a},f=1;f<=b;++f)if(d[f]==e&&f!=b)++a;else{if(!e&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(e),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(e);a=1,e=d[f]}return[g.subarray(0,h),b]},c1=function(d,b){for(var c=0,a=0;a<b.length;++a)c+=d[a]*b[a];return c},c2=function(b,f,e){var c=e.length,a=cW(f+2);b[a]=255&c,b[a+1]=c>>>8,b[a+2]=255^b[a],b[a+3]=255^b[a+1];for(var d=0;d<c;++d)b[a+d+4]=e[d];return 8*(a+4+c)},c3=function(J,c,K,d,l,q,y,L,z,A,b){cY(c,b++,K),++l[256];for(var D=c$(l,15),m=D[0],M=D[1],E=c$(q,15),n=E[0],N=E[1],F=c0(m),r=F[0],O=F[1],G=c0(n),s=G[0],P=G[1],e=new ab(19),a=0;a<r.length;++a)e[31&r[a]]++;for(a=0;a<s.length;++a)e[31&s[a]]++;for(var H=c$(e,7),h=H[0],Q=H[1],f=19;f>4&&!h[cS[f-1]];--f);var j,k,t,u,I=A+5<<3,v=c1(l,i)+c1(q,C)+y,w=c1(l,m)+c1(q,n)+y+14+3*f+c1(e,h)+(2*e[16]+3*e[17]+7*e[18]);if(I<=v&&I<=w)return c2(c,b,J.subarray(z,z+A));if(cY(c,b,1+(w<v)),b+=2,w<v){j=B(m,M,0),k=m,t=B(n,N,0),u=n;var R=B(h,Q,0);for(cY(c,b,O-257),cY(c,b+5,P-1),cY(c,b+10,f-4),b+=14,a=0;a<f;++a)cY(c,b+3*a,h[cS[a]]);b+=3*f;for(var S=[r,s],x=0;x<2;++x){var o=S[x];for(a=0;a<o.length;++a){var g=31&o[a];cY(c,b,R[g]),b+=h[g],g>15&&(cY(c,b,o[a]>>>5&127),b+=o[a]>>>12)}}}else j=cU,k=i,t=cV,u=C;for(a=0;a<L;++a)if(d[a]>255){cZ(c,b,j[(g=d[a]>>>18&31)+257]),b+=k[g+257],g>7&&(cY(c,b,d[a]>>>23&31),b+=ad[g]);var p=31&d[a];cZ(c,b,t[p]),b+=u[p],p>3&&(cZ(c,b,d[a]>>>5&8191),b+=ae[p])}else cZ(c,b,j[d[a]]),b+=k[d[a]];return cZ(c,b,j[256]),b+k[256]},c4=new ac([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),c5=new h(0),c6=function(){for(var c=new ac(256),a=0;a<256;++a){for(var b=a,d=9;--d;)b=(1&b&&3988292384)^b>>>1;c[a]=b}return c}(),c7=function(){var a=4294967295;return{p:function(d){for(var b=a,c=0;c<d.length;++c)b=c6[255&b^d[c]]^b>>>8;a=b},d:function(){return 4294967295^a}}},c8=function(b,a,c,d,e){return function(b,C,D,u,v,w){var e=b.length,x=new h(u+e+5*(1+Math.floor(e/7e3))+v),j=x.subarray(u,x.length-v),c=0;if(!C||e<8)for(var a=0;a<=e;a+=65535){var E=a+65535;E<e?c=c2(j,c,b.subarray(a,E)):(j[a]=w,c=c2(j,c,b.subarray(a,e)))}else{for(var F=c4[C-1],N=F>>>13,O=8191&F,P=(1<<D)-1,y=new ab(32768),G=new ab(P+1),Q=Math.ceil(D/3),W=2*Q,H=function(a){return(b[a]^b[a+1]<<Q^b[a+2]<<W)&P},p=new ac(25e3),n=new ab(288),q=new ab(32),z=0,r=0,k=(a=0,0),I=0,o=0;a<e;++a){var A=H(a),l=32767&a,m=G[A];if(y[l]=m,G[A]=l,I<=a){var s=e-a;if((z>7e3||k>24576)&&s>423){c=c3(b,j,0,p,n,q,r,k,o,a-o,c),k=z=r=0,o=a;for(var d=0;d<286;++d)n[d]=0;for(d=0;d<30;++d)q[d]=0}var i=2,t=0,R=O,f=l-m&32767;if(s>2&&A==H(a-f))for(var S=Math.min(N,s)-1,T=Math.min(32767,a),U=Math.min(258,s);f<=T&& --R&&l!=m;){if(b[a+i]==b[a+i-f]){for(var g=0;g<U&&b[a+g]==b[a+g-f];++g);if(g>i){if(i=g,t=f,g>S)break;var V=Math.min(f,g-2),J=0;for(d=0;d<V;++d){var B=a-f+d+32768&32767,K=B-y[B]+32768&32767;K>J&&(J=K,m=B)}}}f+=(l=m)-(m=y[l])+32768&32767}if(t){p[k++]=268435456|ag[i]<<18|cT[t];var L=31&ag[i],M=31&cT[t];r+=ad[L]+ae[M],++n[257+L],++q[M],I=a+i,++z}else p[k++]=b[a],++n[b[a]]}}c=c3(b,j,w,p,n,q,r,k,o,a-o,c),w||(c=c2(j,c,c5))}return cX(x,0,u+cW(c)+v)}(b,null==a.level?6:a.level,null==a.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(b.length)))):12+a.mem,c,d,!e)},c9=function(c,b,a){for(;a;++b)c[b]=a,a>>>=8},da=function(a,b){var d=b.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:9==b.level?2:0,a[9]=3,0!=b.mtime&&c9(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3)),d){a[3]=8;for(var c=0;c<=d.length;++c)a[c+10]=d.charCodeAt(c)}},db=function(a){return 10+(a.filename&&a.filename.length+1||0)};(E=D||(D={})).GZipJS="gzip-js",E.Base64="base64";var dc=function(c,g,h){var a=g||{};a.ip=h.ip?1:0,a._=(new Date).getTime().toString(),a.ver=a_.LIB_VERSION;var d=c.split("?");if(d.length>1){var e,b=a$(d[1].split("&"));try{for(b.s();!(e=b.n()).done;){var f=e.value.split("=")[0];L(a[f])||delete a[f]}}catch(i){b.e(i)}finally{b.f()}}var j=c.indexOf("?")> -1?"&":"?";return c+j+function(a){var d,e,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"&",c=[];return bk(a,function(b,a){L(b)||L(a)||"undefined"===a||(d=encodeURIComponent(b.toString()),e=encodeURIComponent(a),c[c.length]=e+"="+d)}),c.join(b)}(a)},dd=function d(a,b){var c;if(b.blob&&a.buffer)return new Blob([a3(a)?a:a.buffer],{type:"text/plain"});if(b.sendBeacon||b.blob){var e=d(a,{method:"POST"});return new Blob([e],{type:"application/x-www-form-urlencoded"})}return"POST"!==b.method?null:(c=a2(a)||a3(a)?"data="+encodeURIComponent(a):"data="+encodeURIComponent(a.data),"compression"in a&&a.compression&&(c+="&compression="+a.compression),c)},de=function(a){var d=a.url,g=a.data,h=a.headers,c=a.options,k=a.callback,e=a.retriesPerformedSoFar,l=a.retryQueue,m=a.onXHRError,f=a.timeout,i=void 0===f?6e4:f,n=a.onResponse;a9(e)&&e>0&&(d=dc(d,{retry_count:e},{}));var b=new XMLHttpRequest;b.open(c.method||"GET",d,!0);var j=dd(g,c);bk(h,function(a,c){b.setRequestHeader(c,a)}),"POST"!==c.method||c.blob||b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.timeout=i,b.withCredentials=!0,b.onreadystatechange=function(){if(4===b.readyState){if(null==n||n(b),200===b.status){if(k){var a;try{a=JSON.parse(b.responseText)}catch(f){return void bg.error(f)}k(a)}}else a4(m)&&m(b),(b.status<400||b.status>500)&&l.enqueue({url:d,data:g,options:c,headers:h,retriesPerformedSoFar:(e||0)+1,callback:k}),null==k||k({status:0})}},b.send(j)},df=18e5,dg=function(b){aS(a,cQ);var c=aV(a);function a(e,f){var b;return aP(this,a),(b=c.call(this)).isPolling=!1,b.queue=[],b.areWeOnline=!0,b.onXHRError=e,b.rateLimiter=f,!L(d)&&"onLine"in d.navigator&&(b.areWeOnline=d.navigator.onLine,d.addEventListener("online",function(){b._handleWeAreNowOnline()}),d.addEventListener("offline",function(){b.areWeOnline=!1})),b}return s(a,[{key:"enqueue",value:function(b){var c=b.retriesPerformedSoFar||0;if(!(c>=10)){var i,d,e,a,f,g=(e=(d=3e3*Math.pow(2,i=c))/2,a=Math.min(df,d),f=(Math.random()-.5)*(a-e),Math.ceil(a+f)),j=new Date(Date.now()+g);this.queue.push({retryAt:j,requestData:b});var h="Enqueued failed request for retry in ".concat(g);navigator.onLine||(h+=" (Browser is offline)"),bg.warn(h),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var a=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){a.areWeOnline&&a.queue.length>0&&a.flush(),a.poll()},this._pollInterval)}},{key:"flush",value:function(){var f=new Date(Date.now()),b=this.queue.filter(function(a){return a.retryAt<f});if(b.length>0){this.queue=this.queue.filter(function(a){return a.retryAt>=f});var c,a=a$(b);try{for(a.s();!(c=a.n()).done;){var d=c.value.requestData;this._executeXhrRequest(d)}}catch(e){a.e(e)}finally{a.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var c,a=a$(this.queue);try{for(a.s();!(c=a.n()).done;){var b=c.value.requestData,f=b.url,g=b.data,e=b.options;if(this.rateLimiter.isRateLimited(e._batchKey))bg.warn("[RetryQueue] is quota limited. Dropping request.");else try{null==d||d.navigator.sendBeacon(f,dd(g,r(r({},e),{},{sendBeacon:!0})))}catch(h){bg.error(h)}}}catch(i){a.e(i)}finally{a.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(a){var c=a.url,d=a.data,b=a.options,e=a.headers,f=a.callback,g=a.retriesPerformedSoFar;this.rateLimiter.isRateLimited(b._batchKey)||de({url:c,data:d||{},options:b||{},headers:e||{},retriesPerformedSoFar:g||0,callback:f,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),a}(),dh=1800,di=60,dj=864e5,dk=function(){function a(c,f,g,h){aP(this,a),aR(this,"_sessionIdChangedHandlers",[]),this.config=c,this.persistence=f,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=g||b0,this._windowIdGenerator=h||b0;var d=c.persistence_name||c.token,b=c.session_idle_timeout_seconds||dh;if(a9(b)?b>dh?bg.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):b<di&&bg.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(bg.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),b=dh),this._sessionTimeoutMs=1e3*Math.min(Math.max(b,di),dh),this._window_id_storage_key="ph_"+d+"_window_id",this._primary_window_exists_storage_key="ph_"+d+"_primary_window_exists",this._canUseSessionStorage()){var e=cd.parse(this._window_id_storage_key),i=cd.parse(this._primary_window_exists_storage_key);e&&!i?this._windowId=e:cd.remove(this._window_id_storage_key),cd.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return s(a,[{key:"onSessionId",value:function(a){var b=this;return L(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(a),this._sessionId&&a(this._sessionId,this._windowId),function(){b._sessionIdChangedHandlers=b._sessionIdChangedHandlers.filter(function(b){return b!==a})}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&cd.is_supported()}},{key:"_setWindowId",value:function(a){a!==this._windowId&&(this._windowId=a,this._canUseSessionStorage()&&cd.set(this._window_id_storage_key,a))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?cd.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(a,b,c){a===this._sessionId&&b===this._sessionActivityTimestamp&&c===this._sessionStartTimestamp||(this._sessionStartTimestamp=c,this._sessionActivityTimestamp=b,this._sessionId=a,this.persistence.register(aR({},w,[b,a,c])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var a=this.persistence.props[w];return a2(a)&&2===a.length&&a.push(a[0]),a||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var a=this;null==d||d.addEventListener("beforeunload",function(){a._canUseSessionStorage()&&cd.remove(a._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var h=arguments.length>0&& void 0!==arguments[0]&&arguments[0],c=(arguments.length>1&& void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),e=aW(this._getSessionId(),3),f=e[0],d=e[1],a=e[2],b=this._getWindowId(),i=a&&a>0&&Math.abs(c-a)>dj,g=!1,k=!d,l=!h&&Math.abs(c-f)>this._sessionTimeoutMs;k||l||i?(d=this._sessionIdGenerator(),b=this._windowIdGenerator(),a=c,g=!0):b||(b=this._windowIdGenerator(),g=!0);var m=0===f||!h||i?c:f,j=0===a?(new Date).getTime():a;return this._setWindowId(b),this._setSessionId(d,m,j),g&&this._sessionIdChangedHandlers.forEach(function(a){return a(d,b)}),{sessionId:d,windowId:b,sessionStartTimestamp:j}}}]),a}(),dl=s(function a(b,c,d,e){aP(this,a),this.name="posthog-js",this.setupOnce=function(a){a(function(a){if("error"!==a.level||!b.__loaded)return a;a.tags||(a.tags={});var g,h,i,j,k,l=b.config.ui_host||b.config.api_host;a.tags["PostHog Person URL"]=l+"/person/"+b.get_distinct_id(),b.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=b.get_session_replay_url({withTimestamp:!0}));var f=(null===(g=a.exception)|| void 0===g?void 0:g.values)||[],m={$exception_message:null===(h=f[0])|| void 0===h?void 0:h.value,$exception_type:null===(i=f[0])|| void 0===i?void 0:i.type,$exception_personURL:l+"/person/"+b.get_distinct_id(),$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:null===(j=f[0])|| void 0===j?void 0:j.value,$sentry_exception_type:null===(k=f[0])|| void 0===k?void 0:k.type,$sentry_tags:a.tags};return c&&d&&(m.$sentry_url=(e||"https://sentry.io/organizations/")+c+"/issues/?project="+d+"&query="+a.event_id),b.capture("$exception",m),a})}}),dm=function(a){Promise&&Promise.resolve||bg.warn("This browser does not have Promise support, and can not use the segment integration");var b=function(b,c){b.event.userId||b.event.anonymousId===a.get_distinct_id()||a.reset(),b.event.userId&&b.event.userId!==a.get_distinct_id()&&(a.register({distinct_id:b.event.userId}),a.reloadFeatureFlags());var d=a._calculate_event_properties(c,b.event.properties);return b.event.properties=Object.assign({},d,b.event.properties),b};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(a){return b(a,a.event.event)},page:function(a){return b(a,"$pageview")},identify:function(a){return b(a,"$identify")},screen:function(a){return b(a,"$screen")}}},dn=function(){function a(){var b=this;aP(this,a),aR(this,"_hasSeenPageView",!1),aR(this,"_updateScrollData",function(){b._pageViewData||(b._pageViewData=b._createPageViewData());var c,d,e,f,a=b._pageViewData,g=b._scrollY(),i=b._scrollHeight(),h=b._contentY(),j=b._contentHeight();a.lastScrollY=g,a.maxScrollY=Math.max(g,null!==(c=a.maxScrollY)&& void 0!==c?c:0),a.maxScrollHeight=Math.max(i,null!==(d=a.maxScrollHeight)&& void 0!==d?d:0),a.lastContentY=h,a.maxContentY=Math.max(h,null!==(e=a.maxContentY)&& void 0!==e?e:0),a.maxContentHeight=Math.max(j,null!==(f=a.maxContentHeight)&& void 0!==f?f:0)})}return s(a,[{key:"_createPageViewData",value:function(){var a;return{pathname:null!==(a=null==d?void 0:d.location.pathname)&& void 0!==a?a:""}}},{key:"doPageView",value:function(){var b,a;return this._hasSeenPageView?(a=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,a=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),r({$prev_pageview_pathname:null===(b=a)|| void 0===b?void 0:b.pathname},this._calculatePrevPageScrollProperties(a))}},{key:"doPageLeave",value:function(){var a=this._pageViewData;return r({$prev_pageview_pathname:null==a?void 0:a.pathname},this._calculatePrevPageScrollProperties(a))}},{key:"_calculatePrevPageScrollProperties",value:function(a){if(!a||null==a.maxScrollHeight||null==a.lastScrollY||null==a.maxScrollY||null==a.maxContentHeight||null==a.lastContentY||null==a.maxContentY)return{};var b=a.maxScrollHeight,d=a.lastScrollY,e=a.maxScrollY,c=a.maxContentHeight,f=a.lastContentY,g=a.maxContentY;return b=Math.ceil(b),d=Math.ceil(d),e=Math.ceil(e),c=Math.ceil(c),f=Math.ceil(f),g=Math.ceil(g),{$prev_pageview_last_scroll:d,$prev_pageview_last_scroll_percentage:b<=1?1:dp(d/b,0,1),$prev_pageview_max_scroll:e,$prev_pageview_max_scroll_percentage:b<=1?1:dp(e/b,0,1),$prev_pageview_last_content:f,$prev_pageview_last_content_percentage:c<=1?1:dp(f/c,0,1),$prev_pageview_max_content:g,$prev_pageview_max_content_percentage:c<=1?1:dp(g/c,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){null==d||d.addEventListener("scroll",this._updateScrollData),null==d||d.addEventListener("scrollend",this._updateScrollData),null==d||d.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){null==d||d.removeEventListener("scroll",this._updateScrollData),null==d||d.removeEventListener("scrollend",this._updateScrollData),null==d||d.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return d?Math.max(0,d.document.documentElement.scrollHeight-d.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return d&&(d.scrollY||d.pageYOffset||d.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(null==d?void 0:d.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var a=(null==d?void 0:d.document.documentElement.clientHeight)||0;return this._scrollY()+a}}]),a}();function dp(a,b,c){return Math.max(b,Math.min(a,c))}var n,ai,o,m,dq={icontains:function(a){return!!d&&d.location.href.toLowerCase().indexOf(a.toLowerCase())> -1},regex:function(a){return!!d&&cg(d.location.href,a)},exact:function(a){return(null==d?void 0:d.location.href)===a}},dr=function(){function a(b){aP(this,a),this.instance=b}return s(a,[{key:"getSurveys",value:function(b){var d=this,c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],a=this.instance.get_property(V);if(a&&!c)return b(a);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(e){var a,c=e.surveys||[];return null===(a=d.instance.persistence)|| void 0===a||a.register(aR({},V,c)),b(c)})}},{key:"getActiveMatchingSurveys",value:function(b){var c=this,a=arguments.length>1&& void 0!==arguments[1]&&arguments[1];this.getSurveys(function(a){return b(a.filter(function(a){return!(!a.start_date||a.end_date)}).filter(function(a){if(!a.conditions)return!0;var b,c,d,e,f=null===(b=a.conditions)|| void 0===b||!b.url||dq[null!==(c=null===(d=a.conditions)|| void 0===d?void 0:d.urlMatchType)&& void 0!==c?c:"icontains"](a.conditions.url),g=null===(e=a.conditions)|| void 0===e||!e.selector||(null==bd?void 0:bd.querySelector(a.conditions.selector));return f&&g}).filter(function(a){if(!a.linked_flag_key&&!a.targeting_flag_key)return!0;var b=!a.linked_flag_key||c.instance.featureFlags.isFeatureEnabled(a.linked_flag_key),d=!a.targeting_flag_key||c.instance.featureFlags.isFeatureEnabled(a.targeting_flag_key);return b&&d}))},a)}}]),a}(),ds=6e4,dt=function(){function a(){var b=this;aP(this,a),aR(this,"limits",{}),aR(this,"checkForLimiting",function(c){try{var a=c.responseText;if(!a||!a.length)return;(JSON.parse(a).quota_limited||[]).forEach(function(a){bg.info("[RateLimiter] ".concat(a||"events"," is quota limited.")),b.limits[a]=(new Date).getTime()+ds})}catch(d){return void bg.error(d)}})}return s(a,[{key:"isRateLimited",value:function(b){var a=this.limits[b||"events"]||!1;return!1!==a&&(new Date).getTime()<a}}]),a}(),du=function(){return r({initialPathName:(null==d?void 0:d.location.pathname)||"",referringDomain:ci.referringDomain()},ci.campaignParams())},dv=function(){function a(b,c,d){var e=this;aP(this,a),aR(this,"_onSessionIdCallback",function(a){var b=e._getStoredProps();if(!b||b.sessionId!==a){var c={sessionId:a,props:e._sessionSourceParamGenerator()};e._persistence.register(aR({},Z,c))}}),this._sessionIdManager=b,this._persistence=c,this._sessionSourceParamGenerator=d||du,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return s(a,[{key:"_getStoredProps",value:function(){return this._persistence.props[Z]}},{key:"getSessionProps",value:function(){var b,a=null===(b=this._getStoredProps())|| void 0===b?void 0:b.props;return a?{$client_session_initial_referring_host:a.referringDomain,$client_session_initial_pathname:a.initialPathName,$client_session_initial_utm_source:a.utm_source,$client_session_initial_utm_campaign:a.utm_campaign,$client_session_initial_utm_medium:a.utm_medium,$client_session_initial_utm_content:a.utm_content,$client_session_initial_utm_term:a.utm_term}:{}}}]),a}(),dw=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],dx=function(a,b){if(!a)return!1;var c=a.toLowerCase();return dw.concat(b||[]).some(function(b){var a=b.toLowerCase();return c.includes?c.includes(a):-1!==c.indexOf(a)})};(m=n||(n={}))[m.INIT_MODULE=0]="INIT_MODULE",m[m.INIT_SNIPPET=1]="INIT_SNIPPET";var dy=function(){},dz={},dA="posthog",aj=(null==d?void 0:d.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,dB=!aj&& -1===(null==l?void 0:l.indexOf("MSIE"))&& -1===(null==l?void 0:l.indexOf("Mozilla")),dC=function(){var a,b,c;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:!!a7(c=null==(b=null==bd?void 0:bd.location)?void 0:b.hostname)&&"herokuapp.com"!==c.split(".").slice(-2).join("."),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:dy,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==d||null===(a=d.location)|| void 0===a?void 0:a.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(a){var b="Bad HTTP status: "+a.status+" "+a.statusText;bg.error(b)},get_device_id:function(a){return a},_onCapture:dy,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},dD=function(e,f,c,g){var a,b=c!==dA&&o?c?o[c]:void 0:o,h={initComplete:!1,syncCode:!1},d=function(a){return function(b){h[a]||(h[a]=!0,h.initComplete&&h.syncCode&&(null==g||g(b)))}};if(b&&ai===n.INIT_MODULE)a=b;else{if(b&&!a2(b))return void bg.error("You have already initialized "+c);a=new F}return a._init(e,f,c,d("initComplete")),a.toolbar.maybeLoadToolbar(),a.sessionRecording=new cA(a),a.sessionRecording.startRecordingIfEnabled(),a.config.__preview_measure_pageview_stats&&a.pageViewManager.startMeasuringScrollPosition(),a.__autocapture=a.config.autocapture,x._setIsAutocaptureEnabled(a),x._isAutocaptureEnabled&&(a.__autocapture=a.config.autocapture,x.enabledForProject(a.config.token,100,100)?x.isBrowserSupported()?x.init(a):(a.__autocapture=!1,bg.info("Disabling Automatic Event Collection because this browser is not supported")):(a.__autocapture=!1,bg.info("Not in active bucket: disabling Automatic Event Collection."))),a_.DEBUG=a_.DEBUG||a.config.debug,!L(b)&&a2(b)&&(a._execute_array.call(a.people,b.people),a._execute_array(b)),d("syncCode")(a),a},dE=function(){function a(){aP(this,a),aR(this,"__forceAllowLocalhost",!1)}return s(a,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(a){bg.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=a}}]),a}(),F=function(){function a(){var b=this;aP(this,a),aR(this,"webPerformance",new dE),this.config=dC(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=dl,this.segmentIntegration=function(){return dm(b)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new bW(this),this.toolbar=new cF(this),this.pageViewManager=new dn,this.surveys=new dr(this),this.rateLimiter=new dt,this.people={set:function(a,d,c){var e=a7(a)?aR({},a,d):a;b.setPersonProperties(e),null==c||c({})},set_once:function(a,d,c){var e=a7(a)?aR({},a,d):a;b.setPersonProperties(void 0,e),null==c||c({})}}}return s(a,[{key:"init",value:function(c,d,a){if(L(a))bg.critical("You must name your new library: init(token, config, name)");else{if(a!==dA){var b=dD(c,d,a,function(b){o[a]=b,b._loaded()});return o[a]=b,b}bg.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(n){var c,e,f,t=this,a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},b=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var g,v={segmentRegister:!1,syncCode:!1},h=function(a){return function(){v[a]||(v[a]=!0,v.segmentRegister&&v.syncCode&&(null==u||u(t)))}};if(this.set_config(bl({},dC(),a,{name:b,token:n,callback_fn:(b===dA?b:dA+"."+b)+"._jsc"})),this._jsc=function(){},(null!=d&&null!==(c=d.rrweb)&& void 0!==c&&c.record||null!=d&&d.rrwebRecord)&&(this.__loaded_recorder_version=null==d||null===(g=d.rrweb)|| void 0===g?void 0:g.version),this.persistence=new ck(this.config),this._requestQueue=new cR(this._handle_queued_event.bind(this)),this._retryQueue=new dg(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new dk(this.config,this.persistence),this.sessionPropsManager=new dv(this.sessionManager,this.persistence),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new ck(r(r({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),a.segment?(this.config.get_device_id=function(){return a.segment.user().anonymousId()},a.segment.user().id()&&(this.register({distinct_id:a.segment.user().id()}),this.persistence.set_user_state("identified")),a.segment.register(this.segmentIntegration()).then(h("segmentRegister"))):h("segmentRegister")(),void 0!==(null===(e=a.bootstrap)|| void 0===e?void 0:e.distinctID)){var i,j,o=this.config.get_device_id(b0()),p=null!==(i=a.bootstrap)&& void 0!==i&&i.isIdentifiedID?o:a.bootstrap.distinctID;this.persistence.set_user_state(null!==(j=a.bootstrap)&& void 0!==j&&j.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:a.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var k,l,q=Object.keys((null===(k=a.bootstrap)|| void 0===k?void 0:k.featureFlags)||{}).filter(function(d){var b,c;return!(null===(b=a.bootstrap)|| void 0===b||null===(c=b.featureFlags)|| void 0===c||!c[d])}).reduce(function(d,e){var b,c;return d[e]=(null===(b=a.bootstrap)|| void 0===b||null===(c=b.featureFlags)|| void 0===c?void 0:c[e])||!1,d},{}),s=Object.keys((null===(l=a.bootstrap)|| void 0===l?void 0:l.featureFlagPayloads)||{}).filter(function(a){return q[a]}).reduce(function(g,b){var c,d,e,f;return null!==(c=a.bootstrap)&& void 0!==c&&null!==(d=c.featureFlagPayloads)&& void 0!==d&&d[b]&&(g[b]=null===(e=a.bootstrap)|| void 0===e||null===(f=e.featureFlagPayloads)|| void 0===f?void 0:f[b]),g},{});this.featureFlags.receivedFeatureFlags({featureFlags:q,featureFlagPayloads:s})}if(!this.get_distinct_id()){var m=this.config.get_device_id(b0());this.register_once({distinct_id:m,$device_id:m},""),this.persistence.set_user_state("anonymous")}null==d||null===(f=d.addEventListener)|| void 0===f||f.call(d,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),h("syncCode")()}},{key:"_afterDecideResponse",value:function(a){var c;if(this.compression={},a.supportedCompression&&!this.config.disable_compression){var d,e={},b=a$(a.supportedCompression);try{for(b.s();!(d=b.n()).done;)e[d.value]=!0}catch(f){b.e(f)}finally{b.f()}this.compression=e}null!==(c=a.analytics)&& void 0!==c&&c.endpoint&&(this.analyticsDefaultEndpoint=a.analytics.endpoint),a.elementsChainAsString&&(this.elementsChainAsString=a.elementsChainAsString)}},{key:"_loaded",value:function(){var a=this.config.advanced_disable_decide;a||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(b){bg.critical("`loaded` function failed",b)}this._start_queue_if_opted_in(),this.config.capture_pageview&&bd&&this.capture("$pageview",{title:bd.title},{send_instantly:!0}),a||(new cB(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var a;this.has_opted_out_capturing()||this.config.request_batching&&(null===(a=this._requestQueue)|| void 0===a||a.poll())}},{key:"_dom_loaded",value:function(){var a=this;this.has_opted_out_capturing()||bj(this.__request_queue,function(b){a._send_request.apply(a,aX(b))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(b,e){if(L(b))return null;if(aj)return function(a){b(a,e)};var c=this._jsc,a=""+Math.floor(1e8*Math.random()),d=this.config.callback_fn+"["+a+"]";return c[a]=function(d){delete c[a],b(d,e)},d}},{key:"_handle_unload",value:function(){var a,b;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),null===(a=this._requestQueue)|| void 0===a||a.unload(),null===(b=this._retryQueue)|| void 0===b||b.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(a,b,c){var d=JSON.stringify(b);this.__compress_and_send_json_request(a,d,c||dz,dy)}},{key:"__compress_and_send_json_request",value:function(l,m,n,o){var i,d,e,b,c,f,j,a,g,p=(i=this.compression[D.GZipJS]?D.GZipJS:D.Base64,d=m,e=n,i===D.GZipJS?[(b=function(c,g){var i=c.length;if(!g&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(c);for(var e=new h(c.length+(c.length>>>1)),f=0,b=function(a){e[f++]=a},d=0;d<i;++d){if(f+5>e.length){var j=new h(f+8+(i-d<<1));j.set(e),e=j}var a=c.charCodeAt(d);a<128||g?b(a):a<2048?(b(192|a>>>6),b(128|63&a)):a>55295&&a<57344?(b(240|(a=65536+(1047552&a)|1023&c.charCodeAt(++d))>>>18),b(128|a>>>12&63),b(128|a>>>6&63),b(128|63&a)):(b(224|a>>>12),b(128|a>>>6&63),b(128|63&a))}return cX(e,0,f)}(d),c={mtime:0},f=c7(),j=b.length,f.p(b),g=(a=c8(b,c,db(c),8)).length,da(a,c),c9(a,g-8,f.d()),c9(a,g-4,j),a),r(r({},e),{},{blob:!0,urlQueryArgs:{compression:D.GZipJS}})]:[{data:bt(d)},e]),k=aW(p,2),q=k[0],s=k[1];this._send_request(l,q,s,o)}},{key:"_send_request",value:function(b,e,a,g){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(a._batchKey)){if(dB)this.__request_queue.push([b,e,a,g]);else{a=bl({method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose},a||{}),aj||(a.method="GET");var i=d&&"sendBeacon"in d.navigator&&"sendBeacon"===a.transport;if(b=dc(b,a.urlQueryArgs||{},{ip:this.config.ip}),i)try{null==d||d.navigator.sendBeacon(b,dd(e,r(r({},a),{},{sendBeacon:!0})))}catch(k){}else if(aj||!bd)try{de({url:b,data:e,headers:this.config.xhr_headers,options:a,callback:g,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(j){bg.error(j)}else{var f,c=bd.createElement("script");c.type="text/javascript",c.async=!0,c.defer=!0,c.src=b;var h=bd.getElementsByTagName("script")[0];null===(f=h.parentNode)|| void 0===f||f.insertBefore(c,h)}}}}},{key:"_execute_array",value:function(b){var f,g=this,c=[],d=[],e=[];bj(b,function(a){a&&(a2(f=a[0])?e.push(a):a4(a)?a.call(g):a2(a)&&"alias"===f?c.push(a):a2(a)&& -1!==f.indexOf("capture")&&a4(g[f])?e.push(a):d.push(a))});var a=function(a,b){bj(a,function(a){if(a2(a[0])){var c=b;bk(a,function(a){c=c[a[0]].apply(c,a.slice(1))})}else this[a[0]].apply(this,a.slice(1))},b)};a(c,this),a(d,this),a(e,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var a,b;return(null===(a=this.config.bootstrap)|| void 0===a?void 0:a.featureFlags)&&Object.keys(null===(b=this.config.bootstrap)|| void 0===b?void 0:b.featureFlags).length>0||!1}},{key:"push",value:function(a){this._execute_array([a])}},{key:"capture",value:function(c,i){var a=arguments.length>2&& void 0!==arguments[2]?arguments[2]:dz;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return bg.uninitializedWarning("posthog.capture");if(!function(a){var b=!1;try{var c=a.config.token,d=a.config.respect_dnt,e=a.config.opt_out_capturing_persistence_type,f=a.config.opt_out_capturing_cookie_prefix||void 0,g=a.config.window;c&&(b=cK(c,{respectDnt:d,persistenceType:e,persistencePrefix:f,window:g}))}catch(h){bg.error("Unexpected error when checking capturing opt-out status: "+h)}return b}(this)){var d=(a=a||dz).transport;if(d&&(a.transport=d),!L(c)&&a7(c)){if(!l||this.config.opt_out_useragent_filter||!dx(l,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var e,j,f,k,m,b={uuid:b0(),event:c,properties:this._calculate_event_properties(c,i||{})};"$identify"===c&&(b.$set=a.$set,b.$set_once=a.$set_once),(b=(e=b,j=a._noTruncate?null:this.config.properties_string_max_length,f=e,k=function(a,b){return b&&bs.indexOf(b)> -1?a:a7(a)&&!a8(j)?a.slice(0,j):a},m=new Set,function c(a,d){var b;return a!==Object(a)?k?k(a,void 0):a:m.has(a)?void 0:(m.add(a),a2(a)?(b=[],bj(a,function(a){b.push(c(a))})):(b={},bk(a,function(a,d){m.has(a)||(b[d]=c(a,d))})),b)}(f))).timestamp=a.timestamp||new Date;var g=r(r({},b.properties.$set),b.$set);a6(g)||this.setPersonPropertiesForFlags(g),bg.info("send",b);var n=JSON.stringify(b),h=this.config.api_host+(a.endpoint||this.analyticsDefaultEndpoint),o=a!==dz;return!this.config.request_batching||o&&!a._batchKey||a.send_instantly?this.__compress_and_send_json_request(h,n,a):this._requestQueue.enqueue(h,b,a),this._invokeCaptureHooks(c,b),b}}else bg.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(a){this.__captureHooks.push(a)}},{key:"_invokeCaptureHooks",value:function(a,b){this.config._onCapture(a,b),bk(this.__captureHooks,function(b){return b(a)})}},{key:"_calculate_event_properties",value:function(b,e){if(!this.persistence||!this.sessionPersistence)return e;var f=this.persistence.remove_event_timer(b),a=r({},e);if(a.token=this.config.token,"$snapshot"===b){var i=r(r({},this.persistence.properties()),this.sessionPersistence.properties());return a.distinct_id=i.distinct_id,a}var j=ci.properties();if(this.sessionManager){var g=this.sessionManager.checkAndGetSessionAndWindowId(),k=g.sessionId,m=g.windowId;a.$session_id=k,a.$window_id=m}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===b||"$pageleave"===b||"$autocapture"===b)&&(a=bl(a,this.sessionPropsManager.getSessionProps())),this.config.__preview_measure_pageview_stats){var c={};"$pageview"===b?c=this.pageViewManager.doPageView():"$pageleave"===b&&(c=this.pageViewManager.doPageLeave()),a=bl(a,c)}if("$pageview"===b&&bd&&(a.title=bd.title),"$performance_event"===b){var n=this.persistence.properties();return a.distinct_id=n.distinct_id,a.$current_url=j.$current_url,a}if(!L(f)){var o=(new Date).getTime()-f;a.$duration=parseFloat((o/1e3).toFixed(3))}l&&this.config.opt_out_useragent_filter&&(a.$browser_type=dx(l,this.config.custom_blocked_useragents)?"bot":"browser"),a=bl({},ci.properties(),this.persistence.properties(),this.sessionPersistence.properties(),a);var d=this.config.property_blacklist;a2(d)?bk(d,function(b){delete a[b]}):bg.error("Invalid value for property_blacklist config: "+d);var h=this.config.sanitize_properties;return h&&(a=h(a,b)),a}},{key:"register",value:function(b,c){var a;null===(a=this.persistence)|| void 0===a||a.register(b,c)}},{key:"register_once",value:function(b,c,d){var a;null===(a=this.persistence)|| void 0===a||a.register_once(b,c,d)}},{key:"register_for_session",value:function(b){var a;null===(a=this.sessionPersistence)|| void 0===a||a.register(b)}},{key:"unregister",value:function(b){var a;null===(a=this.persistence)|| void 0===a||a.unregister(b)}},{key:"unregister_for_session",value:function(b){var a;null===(a=this.sessionPersistence)|| void 0===a||a.unregister(b)}},{key:"_register_single",value:function(a,b){this.register(aR({},a,b))}},{key:"getFeatureFlag",value:function(a,b){return this.featureFlags.getFeatureFlag(a,b)}},{key:"getFeatureFlagPayload",value:function(b){var a=this.featureFlags.getFeatureFlagPayload(b);try{return JSON.parse(a)}catch(c){return a}}},{key:"isFeatureEnabled",value:function(a,b){return this.featureFlags.isFeatureEnabled(a,b)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(a,b){this.featureFlags.updateEarlyAccessFeatureEnrollment(a,b)}},{key:"getEarlyAccessFeatures",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(a,b)}},{key:"onFeatureFlags",value:function(a){return this.featureFlags.onFeatureFlags(a)}},{key:"onSessionId",value:function(c){var a,b;return null!==(a=null===(b=this.sessionManager)|| void 0===b?void 0:b.onSessionId(c))&& void 0!==a?a:function(){}}},{key:"getSurveys",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(a,b)}},{key:"getActiveMatchingSurveys",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(a,b)}},{key:"identify",value:function(a,c,d){if(!this.__loaded||!this.persistence)return bg.uninitializedWarning("posthog.identify");if(a){if(["distinct_id","distinctid"].includes(a.toLowerCase()))bg.critical('The string "'.concat(a,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var b=this.get_distinct_id();if(this.register({$user_id:a}),!this.get_property("$device_id")){var e=b;this.register_once({$had_persisted_distinct_id:!0,$device_id:e},"")}a!==b&&a!==this.get_property(N)&&(this.unregister(N),this.register({distinct_id:a}));var f="anonymous"===this.persistence.get_user_state();a!==b&&f?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(c||{},!1),this.capture("$identify",{distinct_id:a,$anon_distinct_id:b},{$set:c||{},$set_once:d||{}}),this.featureFlags.setAnonymousDistinctId(b)):(c||d)&&this.setPersonProperties(c,d),a!==b&&(this.reloadFeatureFlags(),this.unregister(W))}}else bg.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(a,b){(a||b)&&(this.setPersonPropertiesForFlags(a||{}),this.capture("$set",{$set:a||{},$set_once:b||{}}))}},{key:"group",value:function(a,b,c){if(a&&b){var d=this.getGroups();d[a]!==b&&this.resetGroupPropertiesForFlags(a),this.register({$groups:r(r({},d),{},aR({},a,b))}),c&&(this.capture("$groupidentify",{$group_type:a,$group_key:b,$group_set:c}),this.setGroupPropertiesForFlags(aR({},a,c))),d[a]===b||c||this.reloadFeatureFlags()}else bg.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(a){var b=!(arguments.length>1&& void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(a,b)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(a){var b=!(arguments.length>1&& void 0!==arguments[1])||arguments[1];this.featureFlags.setGroupPropertiesForFlags(a,b)}},{key:"resetGroupPropertiesForFlags",value:function(a){this.featureFlags.resetGroupPropertiesForFlags(a)}},{key:"reset",value:function(f){if(!this.__loaded)return bg.uninitializedWarning("posthog.reset");var a,b,c,d,g=this.get_property("$device_id");null===(a=this.persistence)|| void 0===a||a.clear(),null===(b=this.sessionPersistence)|| void 0===b||b.clear(),null===(c=this.persistence)|| void 0===c||c.set_user_state("anonymous"),null===(d=this.sessionManager)|| void 0===d||d.resetSessionId();var e=this.config.get_device_id(b0());this.register_once({distinct_id:e,$device_id:f?e:g},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var a,b;return null!==(a=null===(b=this.sessionManager)|| void 0===b?void 0:b.checkAndGetSessionAndWindowId(!0).sessionId)&& void 0!==a?a:""}},{key:"get_session_replay_url",value:function(a){if(!this.sessionManager)return"";var f=this.config.ui_host||this.config.api_host,e=this.sessionManager.checkAndGetSessionAndWindowId(!0),g=e.sessionId,b=e.sessionStartTimestamp,c=f+"/replay/"+g;if(null!=a&&a.withTimestamp&&b){var d,h=null!==(d=a.timestampLookBack)&& void 0!==d?d:10;if(!b)return c;var i=Math.max(Math.floor(((new Date).getTime()-b)/1e3)-h,0);c+="?t=".concat(i)}return c}},{key:"alias",value:function(a,b){return a===this.get_property(M)?(bg.critical("Attempting to create alias for existing People user - aborting."),-2):(L(b)&&(b=this.get_distinct_id()),a!==b?(this._register_single(N,a),this.capture("$create_alias",{alias:a,distinct_id:b})):(bg.warn("alias matches current distinct_id - skipping api call."),this.identify(a),-1))}},{key:"set_config",value:function(a){var b,c,d=r({},this.config);a5(a)&&(bl(this.config,a),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),"https://us.posthog.com"===this.config.api_host&&(this.config.api_host="https://app.posthog.com"),null===(b=this.persistence)|| void 0===b||b.update_config(this.config),null===(c=this.sessionPersistence)|| void 0===c||c.update_config(this.config),_.is_supported()&&"true"===_.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(a_.DEBUG=!0),this.sessionRecording&&!L(a.disable_session_recording)&&d.disable_session_recording!==a.disable_session_recording&&(a.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var a;return!(null===(a=this.sessionRecording)|| void 0===a||!a.started)}},{key:"loadToolbar",value:function(a){return this.toolbar.loadToolbar(a)}},{key:"get_property",value:function(b){var a;return null===(a=this.persistence)|| void 0===a?void 0:a.props[b]}},{key:"getSessionProperty",value:function(b){var a;return null===(a=this.sessionPersistence)|| void 0===a?void 0:a.props[b]}},{key:"toString",value:function(){var b,a=null!==(b=this.config.name)&& void 0!==b?b:dA;return a!==dA&&(a=dA+"."+a),a}},{key:"_gdpr_init",value:function(){"localStorage"===this.config.opt_out_capturing_persistence_type&&_.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_capturing()&&(this.config.opt_out_capturing_by_default||b6.get("ph_optout"))&&(b6.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(b){var c,d,a,e,f;if(b&&b.clear_persistence)a=!0;else{if(!b||!b.enable_persistence)return;a=!1}this.config.disable_persistence||(null===(c=this.persistence)|| void 0===c?void 0:c.disabled)===a||null===(e=this.persistence)|| void 0===e||e.set_disabled(a),this.config.disable_persistence||(null===(d=this.sessionPersistence)|| void 0===d?void 0:d.disabled)===a||null===(f=this.sessionPersistence)|| void 0===f||f.set_disabled(a)}},{key:"_gdpr_call_func",value:function(b,a){return a=bl({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},a||{}),_.is_supported()||"localStorage"!==a.persistence_type||(a.persistence_type="cookie"),b(this.config.token,{capture:a.capture,captureEventName:a.capture_event_name,captureProperties:a.capture_properties,persistenceType:a.persistence_type,persistencePrefix:a.cookie_prefix,cookieExpiration:a.cookie_expiration,crossSubdomainCookie:a.cross_subdomain_cookie,secureCookie:a.secure_cookie})}},{key:"opt_in_capturing",value:function(a){a=bl({enable_persistence:!0},a||{}),this._gdpr_call_func(cH,a),this._gdpr_update_persistence(a)}},{key:"opt_out_capturing",value:function(b){var a=bl({clear_persistence:!0},b||{});this._gdpr_call_func(cI,a),this._gdpr_update_persistence(a)}},{key:"has_opted_in_capturing",value:function(a){return this._gdpr_call_func(cJ,a)}},{key:"has_opted_out_capturing",value:function(a){return this._gdpr_call_func(cK,a)}},{key:"clear_opt_in_out_capturing",value:function(a){var b=bl({enable_persistence:!0},null!=a?a:{});this._gdpr_call_func(cL,b),this._gdpr_update_persistence(b)}},{key:"debug",value:function(a){!1===a?(null==d||d.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==d||d.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),a}();!function(c,b){for(var a=0;a<b.length;a++)c.prototype[b[a]]=bq(c.prototype[b[a]])}(F,["identify"]);var G,H,p,j,dF={},ak=function(){o.init=function(c,d,a){if(a)return o[a]||(o[a]=dF[a]=dD(c||"",d||{},a,function(b){o[a]=dF[a]=b,b._loaded()})),o[a];var b=o;return dF[dA]?b=dF[dA]:c&&(b=dD(c,d||{},dA,function(a){dF[dA]=a,a._loaded()}),dF[dA]=b),o=b,ai===n.INIT_SNIPPET&&(be[dA]=o),bk(dF,function(b,a){a!==dA&&(o[a]=b)}),b}},al=function(){function a(){a.done||(a.done=!0,dB=!1,bk(dF,function(a){a._dom_loaded()}))}null!=bd&&bd.addEventListener&&("complete"===bd.readyState?a():bd.addEventListener("DOMContentLoaded",a,!1)),d&&bv(d,"load",a,!0)};(p=G||(G={})).Popover="popover",p.API="api",p.Widget="widget",(j=H||(H={})).Open="open",j.MultipleChoice="multiple_choice",j.SingleChoice="single_choice",j.Rating="rating",j.Link="link";var am=(ai=n.INIT_MODULE,o=new F,ak(),o.init(),al(),o);am.init("phc_N7OxUp5H8Tt5zZyaYevvnr748X4VserVtAvUBk0Ve17",{api_host:"https://app.posthog.com",loaded:function(a){}});var dG="remoteStorage",dH="https://remote.storage",dI=e(1795);function dJ(a){var b=a.Component,c=a.pageProps,d=(0,aM.useRouter)();return(0,k.useEffect)(function(){var a=function(){return null==am?void 0:am.capture("$pageview")};return d.events.on("routeChangeComplete",a),function(){d.events.off("routeChangeComplete",a)}},[]),(0,ap.jsxs)(ap.Fragment,{children:[(0,ap.jsxs)(aA(),{children:[(0,ap.jsx)("link",{rel:"shortcut icon",href:"/favicon.svg"}),(0,ap.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,ap.jsx)(aG,{title:"".concat("Easily persist data across browsers and devices."," \u2014 ").concat(dG),description:dI.description,openGraph:{type:"website",url:dH,title:dG,description:dI.description,images:[{url:"".concat(dH,"/og.png"),alt:dG},]}}),(0,ap.jsx)(au,{disableTransitionOnChange:!0,attribute:"class",children:(0,ap.jsx)(b,(0,ao.Z)({},c))})]})}},2971:function(){},6864:function(a,c,b){a.exports=b(2007)},7652:function(a,c,b){a.exports=b(1609)},7234:function(c,a,b){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(e){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){d(e,a,c[a])})}return e}b.d(a,{Z:function(){return e}})},1795:function(a){"use strict";a.exports=JSON.parse('{"name":"remote-storage","version":"1.0.5","description":"remoteStorage is a simple library that combines the localStorage API with a remote server to persist data across browsers and devices.","type":"module","main":"./dist/index.js","types":"./dist/index.d.ts","files":["./dist"],"exports":{".":{"require":"./dist/index.cjs","import":"./dist/index.js"}},"scripts":{"dev":"tsup --watch","build":"tsup && tsup --config tsup.dist.config.ts && mv dist/index.min.js dist/remote-storage.min.js","test":"jest","lint":"eslint --fix --ext .ts,.tsx .","local-release":"tsup"},"repository":{"type":"git","url":"git+https://github.com/FrigadeHQ/remote-storage.git"},"keywords":["localStorage","local storage","remoteStorage","remote storage","local","remote","storage","Javascript","feature flags","user flags","browser","device","web"],"devDependencies":{"@babel/core":"^7.15.8","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.21.5","@babel/preset-typescript":"^7.21.5","@types/jest":"^23.3.1","babel-jest":"^29.4.1","jest":"^29.4.1","jest-config":"^29.3.1","jest-environment-jsdom":"^29.4.1","lint-staged":"^13.0.0","prettier":"^2.4.1","prop-types":"^15.8.1","ts-jest":"^29.1.0","tsup":"^6.7.0","typescript":"^4.9.4"},"author":"Frigade Inc.","license":"MIT","bugs":{"url":"https://github.com/FrigadeHQ/remote-storage/issues"},"homepage":"https://github.com/FrigadeHQ/remote-storage","dependencies":{"cross-fetch":"^4.0.0"}}')}},function(a){var b=function(b){return a(a.s=b)};a.O(0,[774,179],function(){return b(8233),b(1609)}),_N_E=a.O()}])