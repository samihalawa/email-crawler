/*! FinalScout Developers Team 2024-02-05 9:05 */

!function(e,t){var n,i;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=e.Base64,(i=t()).noConflict=function(){return e.Base64=n,i},e.Meteor&&(Base64=i),e.Base64=i)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(){"use strict";var e,t="function"==typeof atob,n="function"==typeof btoa,i="function"==typeof Buffer,s="function"==typeof TextDecoder?new TextDecoder:void 0,r="function"==typeof TextEncoder?new TextEncoder:void 0,o=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),a=(e={},o.forEach(function(t,n){return e[t]=n}),e),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_=String.fromCharCode.bind(String),l="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e,t){return void 0===t&&(t=function(e){return e}),new Uint8Array(Array.prototype.slice.call(e,0).map(t))},p=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return"+"==e?"-":"_"})},d=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},u=function(e){for(var t,n,i,s,r="",a=e.length%3,c=0;c<e.length;){if((n=e.charCodeAt(c++))>255||(i=e.charCodeAt(c++))>255||(s=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");r+=o[(t=n<<16|i<<8|s)>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}return a?r.slice(0,a-3)+"===".substring(a):r},f=n?function(e){return btoa(e)}:i?function(e){return Buffer.from(e,"binary").toString("base64")}:u,g=i?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=[],n=0,i=e.length;n<i;n+=4096)t.push(_.apply(null,e.subarray(n,n+4096)));return f(t.join(""))},h=function(e,t){return void 0===t&&(t=!1),t?p(g(e)):g(e)},m=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?_(192|t>>>6)+_(128|63&t):_(224|t>>>12&15)+_(128|t>>>6&63)+_(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return _(240|t>>>18&7)+_(128|t>>>12&63)+_(128|t>>>6&63)+_(128|63&t)},v=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,E=function(e){return e.replace(v,m)},b=i?function(e){return Buffer.from(e,"utf8").toString("base64")}:r?function(e){return g(r.encode(e))}:function(e){return f(E(e))},y=function(e,t){return void 0===t&&(t=!1),t?p(b(e)):b(e)},w=function(e){return y(e,!0)},A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,I=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return _(55296+(t>>>10))+_(56320+(1023&t));case 3:return _((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return _((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},S=function(e){return e.replace(A,I)},C=function(e){if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,n,i,s="",r=0;r<e.length;)t=a[e.charAt(r++)]<<18|a[e.charAt(r++)]<<12|(n=a[e.charAt(r++)])<<6|(i=a[e.charAt(r++)]),s+=64===n?_(t>>16&255):64===i?_(t>>16&255,t>>8&255):_(t>>16&255,t>>8&255,255&t);return s},T=t?function(e){return atob(d(e))}:i?function(e){return Buffer.from(e,"base64").toString("binary")}:C,k=i?function(e){return l(Buffer.from(e,"base64"))}:function(e){return l(T(e),function(e){return e.charCodeAt(0)})},L=function(e){return k(R(e))},N=i?function(e){return Buffer.from(e,"base64").toString("utf8")}:s?function(e){return s.decode(k(e))}:function(e){return S(T(e))},R=function(e){return d(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}))},O=function(e){return N(R(e))},P=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},x=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,P(t))};e("fromBase64",function(){return O(this)}),e("toBase64",function(e){return y(this,e)}),e("toBase64URI",function(){return y(this,!0)}),e("toBase64URL",function(){return y(this,!0)}),e("toUint8Array",function(){return L(this)})},j=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,P(t))};e("toBase64",function(e){return h(this,e)}),e("toBase64URI",function(){return h(this,!0)}),e("toBase64URL",function(){return h(this,!0)})},D={version:"3.7.2",VERSION:"3.7.2",atob:T,atobPolyfill:C,btoa:f,btoaPolyfill:u,fromBase64:O,toBase64:y,encode:y,encodeURI:w,encodeURL:w,utob:E,btou:S,decode:O,isValid:function(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:h,toUint8Array:L,extendString:x,extendUint8Array:j,extendBuiltins:function(){x(),j()},Base64:{}};return Object.keys(D).forEach(function(e){return D.Base64[e]=D[e]}),D});const Config={plugin_type:"plugin_online",is_prd:!0,server_base_path:"https://finalscout.com",APIs:{url_finder:"/plugin/r/find/linkedin",batch_finder:"/plugin/r/scrape/linkedin",prospect_search:"/plugin/r/prospect",scrape_content_authors:"/plugin/r/scrape/content_authors",scrape_post_reactors:"/plugin/r/scrape/post_reactors",single_finder:"/api/plugin/find/email",single_finder_poll_result:"/api/plugin/find/email/status",tags:"/api/plugin/tags",setting_contact_tags:"/api/plugin/contact/tags",event_finder:"/plugin/r/scrape/event",plugin_config:"/api/plugin/config",verify_account:"/api/account/verify",report:"/api/plugin/report",notifications:"/api/plugin/notifications",login:"/account/signin",profile:"/account/profile",view_credits_usage:"/app/account/credits/usage",active_free_trial:"/account/bind/payment",buy_credits:"/credits",upgrade:"/plans",user_profile:"/api/plugin/account/profile"},popup:{app:"/app",find_professional:"/app/find/professional",find_author:"/app/find/author",find_linkedin:"/app/find/linkedin",prospect:"/app/prospect",contacts:"/app/contacts",email_types_setting:"/app/email-types",create_scrape_task:"/plugin/r/popup/create-scrape-task"},request_bg_types:{batch_scrape:"finalscout:batch:req",single_find:"finalscout:single:req",single_find_poll_status:"finalscout:single:poll_status:req",scrape_content_authors:"finalscout:scrape_content_authors:req",post_scrape_reactors:"finalscout:scrape_post_reactors:req",plugin_config:"finalscout:config:req",plugin_config_dev_setting:"finalscout:config:dev:setting",error_report:"finalscout:report:req",open_url:"finalscout:open:url",verify_account:"finalscout:verify:account:req",li_credentials:"finalscout:credentials:req",user_auth:"finalscout:user_auth:req",all_tags:"finalscout:all_tags:req",setting_contact_tags:"finalscout:setting_contact_tags:req",notifications:"finalscout:notifications:req",notification_closed:"finalscout:notifications:on_closed",save_user_settings:"finalscout:save_user_settings:req",get_user_settings:"finalscout:get_user_settings:req"},opener_commands:{plugin_version:"fs:cmd:plugin:version",plugin_url_changed:"fs:cmd:plugin:url_changed",plugin_html:"fs:cmd:plugin:html",plugin_profile_not_support:"fs:cmd:plugin:profile_not_supported",plugin_opener_click:"fs:cmd:plugin:opener_click",plugin_app_opened:"fs:cmd:plugin_app:opened",plugin_app_ready:"fs:cmd:plugin_app:ready",plugin_app_waiting_auth:"fs:cmd:plugin_app:waiting_auth",plugin_app_email_ai:"fs:cmd:plugin_app:email_ai",plugin_app_delete_contact:"fs:cmd:plugin_app:delete_contact",plugin_app_credentials:"fs:cmd:plugin_app:credentials",plugin_refresh_context:"fs:cmd:plugin_app:refresh_context",plugin_person_is_saved_contact:"fs:cmd:plugin_app:person:saved_contact",plugin_person_updated:"fs:cmd:plugin_app:person:updated",plugin_person_get_email:"fs:cmd:plugin_app:person:get_email",plugin_person_email_ai:"fs:cmd:plugin_app:person:email_ai",create_batch_task:"fs:cmd:task:batch",size_minimize:"fs:cmd:size:minimize",size_maximize:"fs:cmd:size:maximize",size_normal:"fs:cmd:size:normal",size_custom:"fs:cmd:size:custom"},messages:{find_email:["Finding email...","Searching across the web...","Searching on Twitter...","Searching on Linkedin...","Verifying email...","Domain validation...","MX record detection...","SMTP connection test...","Accept-All email verification...","Email delivery scoring...","Taking longer than expected...","Will notify you once complete..."],failed_request:"Failed to request.",sales_navigator_required:"⚠️ Using regular search instead of Sales Navigator will yield significantly less emails. Are you sure?\n\nClick Ok to open Sales Navigator.",login_required:"You need to sign in to FinalScout to continue.",tooltip_setting_tags:"Manage tags",tooltip_contact_detail:"View details in Contacts",tooltip_copy_email:"Copy email",tooltip_send_email:"Write personalized email using AI",tooltip_scrape_post_reactors:"Find emails for the post author and people reacted to the post"},cookie:{li_at:"li_at",li_a:"li_a",extra:[{name:"sid",key:"JSESSIONID"}]},extension_store_url:"",not_found_detail_url:"https://finalscout.tawk.help/article/top-reasons-for-email-not-found",step_message_timer:{min:30,max:50},waiting_load_before_find:{timer:200,max:30},inject_interval:{timer:500,max:30},poll_find_email_status:{interval:5,max_retry_count:15},opener:{app:"/plugin_app",drag_min_top:15,init_top:150,window_right:15,window_top:55,url_change_msg_delay:800,iframe_options:{id:"fs_destination_publishing_iframe",classes:[],attributes:{isDS:"1"}},size_normal:{width:"320px",height:"640px"},size_maximize:{width:"85vw",height:"calc(100vh - 100px)"}},poll_notifications_interval:1800,toast_duration:5e3,inject_positions:{SALES_NAVIGATOR_SEARCH_BAR:"sales-navigator-search-bar",SALES_NAVIGATOR_SEARCH_ITEM:"sales-navigator-search-item",SALES_NAVIGATOR_SEARCH_PROFILE_VIEW:"sales-navigator-profile-view",SALES_NAVIGATOR_LEAD_LIST_BAR:"sales-navigator-lead-list-bar",SALES_NAVIGATOR_MY_SAVED_LIST_BAR:"sales-navigator-my-saved-list-bar",TALENT_SEARCH_BAR:"talent-search-bar",TALENT_SEARCH_ITEM:"talent-search-item",TALENT_SEARCH_PROFILE_VIEW:"talent-search-profile-view",LINKEDIN_SEARCH_PEOPLE_BAR:"linkedin-search-bar",LINKEDIN_SEARCH_CONTENT_BAR:"linkedin-search-content-bar",LINKEDIN_SEARCH_PEOPLE_ITEM:"linkedin-search-item",LINKEDIN_SEARCH_GROUP_ITEM:"linkedin-search-group-item",LINKEDIN_SEARCH_EVENT_ITEM:"linkedin-search-event-item",LINKEDIN_SEARCH_CONTENT_ITEM:"linkedin-search-content-item",LINKEDIN_PROFILE_VIEW:"linkedin-profile-view",LINKEDIN_HOME_FEED_ITEM:"linkedin-home-feed-item",LINKEDIN_PROFILE_RECENT_ACTIVITY_ITEM:"linkedin-profile-recent-activity-item",LINKEDIN_COMPANY_POST_ITEM:"linkedin-company-post-item",GROUP_DETAIL_VIEW:"group-detail-view",EVENT_DETAIL_VIEW:"event-detail-view",POST_DETAIL_VIEW:"post-detail-view",PULSE_ARTICLE_DETAIL_VIEW:"pulse-article-detail-view"},source_selector:"body>code",profile_invalid_url_keywords:["/recent-activity/","/details/","/overlay/"],inject_matched_urls:{LINKEDIN_SEARCH_PEOPLE_RESULTS:["regex:https://www.linkedin.com/search/results/people"],LINKEDIN_SEARCH_GROUP_RESULTS:["regex:https://www.linkedin.com/search/results/groups"],LINKEDIN_SEARCH_EVENT_RESULTS:["regex:https://www.linkedin.com/search/results/events"],LINKEDIN_SEARCH_CONTENT_RESULTS:["regex:https://www.linkedin.com/search/results/content"],SALES_NAVIGATOR_SEARCH_RESULTS:["regex:https://www.linkedin.com/sales/search/people"],SALES_NAVIGATOR_LEAD_LIST:["regex:https://www.linkedin.com/sales/lists/people/"],SALES_NAVIGATOR_MY_SAVED_LIST:["regex:https://www.linkedin.com/sales/search/people/list/saved-leads"],TALENT_SEARCH_RESULTS:["https://www.linkedin.com/talent/hire/","https://www.linkedin.com/talent/search"],LINKEDIN_PROFILE:["https://www.linkedin.com/in/","https://www.linkedin.com/pub/"],LINKEDIN_HOME_FEED:["regex:https://www.linkedin.com/feed(/(?=\\?|$))?(\\?.*)?$"],LINKEDIN_PROFILE_RECENT_ACTIVITY:["regex:https://www.linkedin.com/in/([^\\/?#]+)/recent-activity/"],LINKEDIN_COMPANY_POSTS:["regex:https://www.linkedin.com/(company|school)/([^\\/?#]+)/posts"],SALES_NAVIGATOR_PROFILE:["https://www.linkedin.com/sales/people/","https://www.linkedin.com/sales/lead/"],TALENT_PROFILE:["https://www.linkedin.com/talent/profile/","https://www.linkedin.com/recruiter/profile/"],GROUP_DETAIL:["https://www.linkedin.com/groups/"],EVENT_DETAIL:["https://www.linkedin.com/video/event/","https://www.linkedin.com/events/"],POST_DETAIL:["https://www.linkedin.com/posts/","https://www.linkedin.com/feed/update/urn:li:activity:","https://www.linkedin.com/feed/update/urn:li:ugcPost:"],PULSE_ARTICLE_DETAIL:["https://www.linkedin.com/pulse/"]},inject_setting:{SALES_NAVIGATOR_SEARCH_BAR:[{ver:"v1",selector:".search-nav-actions",add_class:["mini"],inject_type:"prepend",with_wrap:!0,tag_selector:"input.artdeco-typeahead__input",check_result_selector:".search-results__result-item"},{ver:"v2",selector:"div:has( > .global-typeahead)",add_class:["mini"],inject_type:"append",with_wrap:!0,tag_selector:"input.artdeco-typeahead__input",check_result_selector:".artdeco-list__item"}],SALES_NAVIGATOR_LEAD_LIST_BAR:[{ver:"v1",selector:".lists-nav .flex",add_class:["mini"],inject_type:"prepend",with_wrap:!0,tag_selector:".lists-nav__list-name",check_result_selector:".artdeco-models-table-row"}],SALES_NAVIGATOR_MY_SAVED_LIST_BAR:[{ver:"v1",selector:".search-nav--container",add_class:["mini"],inject_type:"append",with_wrap:!0,tag_selector:".search-filter-keywords-typeahead input",check_result_selector:".search-results__result-item"}],TALENT_SEARCH_BAR:[{ver:"v1",selector:".profile-list__header",add_class:["mini"],inject_type:"append",with_wrap:!0,tag_selector:".project-name__name",check_result_selector:".profile-list-item"}],LINKEDIN_SEARCH_PEOPLE_BAR:[{ver:"v1",selector:".search-reusables__filters-bar-grouping",add_class:["mini"],inject_type:"append",with_wrap:!0,tag_selector:"input.search-global-typeahead__input",check_result_selector:".reusable-search__result-container"}],LINKEDIN_SEARCH_CONTENT_BAR:[{ver:"v1",selector:".search-reusables__filters-bar-grouping",add_class:["mini"],inject_type:"append",with_wrap:!0,tag_selector:"input.search-global-typeahead__input",check_result_selector:".feed-shared-update-v2"}],SALES_NAVIGATOR_SEARCH_ITEM:[{ver:"v4",selector:".artdeco-list__item:not(:has(.deferred-area--pending))",button:{selector:".mt4 ul",add_class:[],with_wrap:!0,inject_send_email_btn:!1,inject_type:"append"},profile_selector:['a[href^="/sales/lead/"]:first','a[href*="/sales/lead/"]:first']},{ver:"v3",selector:".artdeco-list__item:not(:has(.deferred-area--pending))",button:{selector:".mt4 ul > li:last",add_class:[],inject_send_email_btn:!1,inject_type:"append"},profile_selector:['a[href^="/sales/lead/"]:first','a[href*="/sales/lead/"]:first']}],TALENT_SEARCH_ITEM:[{ver:"v1",selector:".profile-list>li:not(:has(.profile-list__occlusion-area))",button:{selector:".row-aside",add_class:[],with_wrap:!0,inject_send_email_btn:!1,inject_type:"append"},profile_selector:['a[href^="/talent/profile/"]:first','a[href*="/talent/profile/"]:first']}],LINKEDIN_SEARCH_PEOPLE_ITEM:[{ver:"v1",selector:".reusable-search__result-container:not(:has(.deferred-area--pending))",button:{selector:".entity-result__actions",add_class:[],inject_send_email_btn:!1,inject_type:"append"},ignore_selector:"div[data-chameleon-result-urn='urn:li:member:headless']",profile_selector:['a[href^="https://www.linkedin.com/in/"]:first','a[href*="/in/"]:first']}],LINKEDIN_SEARCH_GROUP_ITEM:[{ver:"v1",selector:".reusable-search__result-container:not(:has(.deferred-area--pending))",check_selector:".entity-result__title-text a",button:{selector:".entity-result__divider:has(.entity-result__summary)",add_class:[],inject_type:"append"}}],LINKEDIN_SEARCH_EVENT_ITEM:[{ver:"v1",selector:".reusable-search__result-container:not(:has(.deferred-area--pending))",check_selector:".entity-result__title-text a",button:{selector:".entity-result__insights",add_class:[],inject_type:"append"}}],LINKEDIN_HOME_FEED_ITEM:[{ver:"v1",selector:".feed-shared-update-v2:not(:has(.deferred-area--pending))",check_selector:".social-details-social-counts",button:{selector:".update-v2-social-activity",add_class:[],with_wrap:!0,inject_type:"prepend"}}],LINKEDIN_SEARCH_CONTENT_ITEM:[{ver:"v1",selector:".feed-shared-update-v2:not(:has(.deferred-area--pending))",check_selector:".social-details-social-counts",button:{selector:".update-v2-social-activity",add_class:[],with_wrap:!0,inject_type:"prepend"}}],LINKEDIN_PROFILE_RECENT_ACTIVITY_ITEM:[{ver:"v1",selector:".feed-shared-update-v2:not(:has(.deferred-area--pending))",check_selector:".social-details-social-counts",button:{selector:".update-v2-social-activity",add_class:[],with_wrap:!0,inject_type:"prepend"}}],LINKEDIN_COMPANY_POST_ITEM:[{url_matches:["regex:feedView=ads"],ver:"v1",selector:".feed-shared-update-v2:not(:has(.deferred-area--pending))",check_selector:"",button:{selector:">div:last-child",add_class:["fc-company-feed-ads"],with_wrap:!0,inject_type:"append"}},{ver:"v1",selector:".feed-shared-update-v2:not(:has(.deferred-area--pending))",check_selector:".social-details-social-counts",button:{selector:".update-v2-social-activity",add_class:[],with_wrap:!0,inject_type:"prepend"}}],TALENT_SEARCH_PROFILE_VIEW:[{ver:"v1",selector:".topcard-condensed",button:{selector:".topcard-condensed__content-top",add_class:[],with_wrap:!0,inject_send_email_btn:!0,inject_type:"append"},result:{selector:".topcard-condensed__content-top",add_class:[],inject_type:"append"},expend_buttons:[".lt-line-clamp__more"],extra_html_selectors:[".summary-card__summary",".experience-card",".personal-info"],source:!1}],SALES_NAVIGATOR_SEARCH_PROFILE_VIEW:[{ver:"v1",selector:"#profile-card-section",button:{selector:'section[class^="_header_"]',add_class:[],with_wrap:!0,inject_send_email_btn:!0,inject_type:"append"},result:{selector:'section[class^="_header_"]',add_class:[],inject_type:"append"},extra_html_selectors:["#experience-section","#about-section"],source:!1}],LINKEDIN_PROFILE_VIEW:[{ver:"v1",selector:".pv-top-card, .artdeco-card:has(img.pv-top-card-profile-picture__image), .artdeco-card:has(.pv-top-card--photo)",button:{selector:".ph5:first",add_class:[],with_wrap:!0,inject_send_email_btn:!0,inject_type:"append"},loading_selector:".scaffold-layout__main .artdeco-card.pvs-loader__profile-card",result:{selector:".ph5:first",add_class:[],inject_type:"append"},expend_buttons:[],extra_html_selectors:["section:has(> #about)","section:has(> #experience)","section:has(> #education)","section:has(> #skills)","section:has(> #languages)"],source:!1}],GROUP_DETAIL_VIEW:[{ver:"v1",selector:".artdeco-card:has(img.groups-header__logo):not(:has(.deferred-area--pending))",name_selector:".groups-entity__name",button:{selector:">.relative",add_class:[],inject_type:"append"}}],EVENT_DETAIL_VIEW:[{ver:"v2",selector:".events-top-card, #events-top-card, .events-live-top-card",name_selector:".events-live-top-card__title",has_register_selector:["a[href*='eventAttending=']",".events-navigation-container button:contains('Networking')"],button:{selector:".events-top-card__info-container, .events-live-top-card__main-content>:first-child",add_class:[],inject_type:"append"}}],POST_DETAIL_VIEW:[{ver:"v1",selector:".feed-shared-update-v2",check_selector:".social-details-social-counts",button:{selector:".update-v2-social-activity",add_class:[],with_wrap:!0,inject_type:"prepend"}}],PULSE_ARTICLE_DETAIL_VIEW:[{ver:"v1",selector:"article.reader__content",check_selector:".social-details-social-counts",button:{selector:".reader-social-bar-v2",add_class:[],with_wrap:!0,inject_type:"append"}}]}};function get_campaign_params(e){return`utm_source=chrome_extension&utm_medium=chrome_extension&utm_campaign=extension&utm_content=${e}`}function get_version(){return chrome.runtime.getManifest().version}function getVersionNum(e){return/^[1-9]\d?(\.([1-9]?\d)){2}$/.test(e)?(e=e.split(".").join(""),/^\d+$/.test(e)?parseInt(e):0):0}function updateConfig(e){for(const[t,n]of Object.entries(e||{}))["inject_positions","inject_matched_urls","inject_setting"].includes(t)?Object.assign(Config[t],n):Object.assign(Config,{[t]:n})}console&&Config.is_prd&&(console.log=function(){},console.info=function(){},console.debug=function(){}),"object"==typeof module&&(module.exports={Config:Config,get_campaign_params:get_campaign_params,get_version:get_version,getVersionNum:getVersionNum,updateConfig:updateConfig});let server_config={},notification_poll_running=!1,notification_poll_count=0,notifications=[],current_active_tab_id=null,user_settings=null;function get_closed_notification_ids(e){chrome.storage.local.get(["closed_notification_ids"]).then(t=>{console.log("[FinalScout]:  get closed_notification_ids from storage "+t.closed_notification_ids);let{closed_notification_ids:n}=t||{};Array.isArray(n)||(n=[]),e(n)})}function get_auth(e,t){if(!Array.isArray(t)||0===t.length)return e({});let n=t.map(e=>new Promise(function(t,n){chrome.cookies.get({url:Config.server_base_path,name:e},function(n){t({name:e,cookie:n})})}));Promise.all(n).then(function(t){let n={};for(const{name:e,cookie:i}of t)n[e]=(i||{}).value;e(n)})}function with_credentials(e,t){let n=Config.cookie||{},i=[new Promise(function(e,t){chrome.cookies.get({url:"https://www.linkedin.com",name:n.li_at||"li_at"},function(t){e({name:"li_at",cookie:t})})}),new Promise(function(e,t){chrome.cookies.get({url:"https://www.linkedin.com",name:n.li_a||"li_a"},function(t){e({name:"li_a",cookie:t})})})];if(Array.isArray(n.extra))for(const e of n.extra){const{key:t,name:n}=e||{};t&&n&&i.push(new Promise(function(e,i){chrome.cookies.get({url:"https://www.linkedin.com",name:t},function(t){e({name:n,cookie:t})})}))}if(Array.isArray(t))for(const e of t){const{key:t,name:n}=e||{};t&&n&&i.push(new Promise(function(e,i){chrome.cookies.get({url:"https://www.linkedin.com",name:t},function(t){e({name:n,cookie:t})})}))}Promise.all(i).then(function(t){let n={};for(const e of t)n[e.name]=Base64.encode((e.cookie||{}).value||"");e(n)})}function serialize_params(e){return Object.entries(e).filter(([e,t])=>null!=t&&void 0!==t).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}function redirect_to_finalscout(e,t,n,i){if(!0===n)with_credentials(n=>{const i=`${Config.server_base_path}${e}?${serialize_params(Object.assign(t||{},n,{version:get_version()}))}`;console.log("[FinalScout]:  goto -> ",i),chrome.tabs.create({url:i})},i);else{const n=`${Config.server_base_path}${e}?${serialize_params(Object.assign(t||{},{version:get_version()}))}`;console.log("[FinalScout]:  goto -> ",n),chrome.tabs.create({url:n})}}function request_server(e,t,n,i,s,r){console.log(`[FinalScout]: START REQ [${e}]  data==>`,t),void 0===i&&(i=!0),s=s||"POST",t=Object.assign(t||{},{version:get_version()});let o=`${Config.server_base_path}${e}`;"POST"!==s&&(o=`${o}?${new URLSearchParams(t)}`);const a=function(){fetch(o,{method:s,headers:{"Content-Type":"application/json"},body:"POST"===s?JSON.stringify(t):void 0,withCredentials:!0,mode:"cors"}).then(e=>e.json().then(t=>({rsp:t,status:e.status}))).then(t=>{const{status:i,rsp:s}=t;if(console.log(`[FinalScout]: RSP Status: ${i}`,e,s),200===i)if(0===s.ret)n&&n(s.data);else{let e=s.data||{msg:Config.messages.failed_request};if(n&&n({request_error:!0,error_status:500,msg:e.msg}),e&&"__dev_test__"===e.code){const{url:t}=e;t&&chrome.tabs.create({url:`${Config.server_base_path}${t}`})}}else{let e=Object.assign({request_error:!0,error_status:i},s||{msg:Config.messages.failed_request});n&&n(e)}}).catch(t=>{console.log("[FinalScout]: RSP Error",e,t),n&&n({request_error:!0,error_status:500,msg:t.message||Config.messages.failed_request})})};i?with_credentials(e=>{Object.assign(t,e),a()},r):a()}function update_config(e){const{config:t,css:n}=e||{};if(t||n){if(t){for(const e of["request_bg_types","plugin_type","is_prd"])t.hasOwnProperty(e)&&delete t[e];updateConfig(t)}server_config={config:t,css:n}}}function init(){request_server(Config.APIs.plugin_config,{},e=>{update_config(e),poll_notifications()},!1,"GET")}function poll_notifications(){if(!0===notification_poll_running)return;notification_poll_running=!0;const e=()=>{request_server(Config.APIs.notifications,{plugin_type:Config.plugin_type},t=>{t=t||{};const{request_error:n,notifications:i}=t;!0!==n&&Array.isArray(i)&&(i.length>0?get_closed_notification_ids(e=>{let t=[];for(const n of i)notifications.find(e=>e.id===n.id)||e.includes(n.id)||t.push(n);if(notifications=i,t.length>0&&current_active_tab_id)try{chrome.tabs.sendMessage(current_active_tab_id,{response:t,callback_id:"finalscout:notifications"})}catch(e){}}):0===notification_poll_count&&chrome.storage.local.set({closed_notification_ids:[]}),notification_poll_count++),setTimeout(function(){e()},1e3*Config.poll_notifications_interval)},!1,"GET")};e()}chrome.runtime.onMessage.addListener(function(e,t,n){if(console.log("[FinalScout]:  receive msg ",e.type,e),"finalscout:popup:config:req"!==e.type){if(e.type===Config.request_bg_types.batch_scrape)e.trigger_position===Config.inject_positions.TALENT_SEARCH_BAR?redirect_to_finalscout(Config.APIs.batch_finder,{search_url:Base64.encode(e.url),trigger_position:e.trigger_position,tag:e.tag},!0,[{name:"li_er",key:"li_er"}]):redirect_to_finalscout(Config.APIs.batch_finder,{search_url:Base64.encode(e.url),trigger_position:e.trigger_position,tag:e.tag},!0);else if(e.type===Config.request_bg_types.scrape_content_authors)redirect_to_finalscout(Config.APIs.scrape_content_authors,{search_url:Base64.encode(e.url),trigger_position:e.trigger_position,tag:e.tag},!0);else if(e.type===Config.request_bg_types.single_find)request_server(Config.APIs.single_finder,e.data,n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})});else if(e.type===Config.request_bg_types.single_find_poll_status)request_server(Config.APIs.single_finder_poll_result,e.data,n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})},!1,"GET");else if(e.type===Config.request_bg_types.post_scrape_reactors)redirect_to_finalscout(Config.APIs.scrape_post_reactors,{data:Base64.encode(JSON.stringify(e.data)),trigger_position:e.trigger_position},!0);else if(e.type===Config.request_bg_types.plugin_config)chrome.tabs.sendMessage(t.tab.id,{response:server_config,callback_id:e.callback_id});else if(e.type===Config.request_bg_types.error_report)request_server(Config.APIs.report,Object.assign({},e.data,{key:e.key,url:e.url}),e=>{update_config(e)},!1);else if(e.type===Config.request_bg_types.open_url)chrome.tabs.create({url:e.url});else if(e.type===Config.request_bg_types.verify_account)request_server(Config.APIs.verify_account,e.data,n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})});else if(e.type===Config.request_bg_types.plugin_config_dev_setting)try{let t=new URL(e.base_path);"http:"!==t.protocol&&"https:"!==t.protocol||(Config.server_base_path=e.base_path)}catch(e){}else if(e.type===Config.request_bg_types.li_credentials)with_credentials(n=>{chrome.tabs.sendMessage(t.tab.id,{response:Object.assign({version:get_version()},n),callback_id:e.callback_id})});else if(e.type===Config.request_bg_types.user_auth)get_auth(n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})},e.data);else if(e.type===Config.request_bg_types.all_tags)request_server(Config.APIs.tags,{},n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})},!1,"GET");else if(e.type===Config.request_bg_types.setting_contact_tags)request_server(Config.APIs.setting_contact_tags,e.data,n=>{chrome.tabs.sendMessage(t.tab.id,{response:n,callback_id:e.callback_id})},!1);else if(e.type===Config.request_bg_types.notifications)current_active_tab_id=t.tab.id,poll_notifications(),get_closed_notification_ids(t=>{let n=[];for(const e of notifications)e.id&&t.includes(e.id)||n.push(e);chrome.tabs.sendMessage(current_active_tab_id,{response:n,callback_id:e.callback_id})});else if(e.type===Config.request_bg_types.notification_closed){if(!e.id)return;get_closed_notification_ids(t=>{t.includes(e.id)||(t.push(e.id),chrome.storage.local.set({closed_notification_ids:t}))})}else if(e.type===Config.request_bg_types.get_user_settings){if(user_settings)return void chrome.tabs.sendMessage(t.tab.id,{response:user_settings,callback_id:e.callback_id});chrome.storage.local.get(["user_settings"]).then(n=>{console.log("[FinalScout]:  get user_settings from storage "+JSON.stringify(n.user_settings)),user_settings=n.user_settings||{},chrome.tabs.sendMessage(t.tab.id,{response:user_settings,callback_id:e.callback_id})})}else if(e.type===Config.request_bg_types.save_user_settings){if(!e.setting)return;user_settings=user_settings||{},Object.assign(user_settings,e.setting),console.log("[FinalScout]:  save user setting===>",e.setting),chrome.storage.local.set({user_settings:user_settings})}}else n(Config)}),chrome.runtime.onMessageExternal.addListener(function(e,t,n){console.log("[FinalScout]:  receive external msg ",e.type,e),"finalscout:version"===e.type?n({version:get_version()}):"finalscout:li:cookies"===e.type&&with_credentials(e=>{n(e)})}),chrome.windows.onCreated.addListener(function(){init()}),chrome.runtime.onInstalled.addListener(function(e){"install"===e.reason&&(chrome.tabs.create({url:`https://finalscout.com/chrome/installed/guide?${get_campaign_params("new_install")}`}),init())}),chrome.runtime.setUninstallURL(`https://finalscout.com/chrome/uninstall?${get_campaign_params("uninstall")}`),chrome.tabs.onUpdated.addListener(function(e,t,n){const i=t.url;console.log("[FinalScout]:  background url change: ",i),i&&i.startsWith("https://www.linkedin.com")&&chrome.tabs.sendMessage(e,{type:"finalscout:tab:url_changed",url:i,callback_id:"tab:url_changed"})});