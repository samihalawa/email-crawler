/*! FinalScout Developers Team 2024-01-03 5:29 */

const campaign_params="utm_source=chrome_extension&utm_medium=chrome_extension&utm_campaign=extension&utm_content=popup";let Config={};function render_usage(e){$(".credits-usage .email-credits").text(`${e.email>=0?e.email+" left":""}`),$(".credits-usage .prospect-credits").text(`${e.prospect>=0?e.prospect+" left":""}`),$(".credits-usage .scrape-credits").text(`${e.scrape>=0?e.scrape+" left":""}`)}function do_search(e){"prospect"===e?window.open(`${Config.server_base_path}${Config.popup.prospect}?keywords=${$(".search-box.prospect input").val()}&${campaign_params}`):window.open(`${Config.server_base_path}${Config.popup.contacts}?keywords=${$(".search-box.contacts input").val()}&${campaign_params}`)}function request_server(e,a,r,s,o){$.ajax({type:o||"GET",url:`${Config.server_base_path}${e}`,data:"POST"===o?JSON.stringify(a||{}):a,contentType:"application/json",dataType:"json",cache:!1,crossDomain:!0,xhrFields:{withCredentials:!0},success:function(e){0===e.ret?r&&r(e.data):s&&s()},error:function(e){s&&s()}})}function init(){!1===Config.is_prd&&Config.popup&&($("a.link_find_professional").attr("href",`${Config.server_base_path}${Config.popup.find_professional}?${campaign_params}`),$("a.link_find_author").attr("href",`${Config.server_base_path}${Config.popup.find_author}?${campaign_params}`),$("a.link_find_linkedin").attr("href",`${Config.server_base_path}${Config.popup.find_linkedin}?${campaign_params}`),$("a.link_usage").attr("href",`${Config.server_base_path}${Config.APIs.view_credits_usage}?${campaign_params}`),$("a.link-logo").attr("href",`${Config.server_base_path}?${campaign_params}`),$("a.task-source-bulk_professional_emails").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-professional-emails&${campaign_params}`),$("a.task-source-bulk_article_urls").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-article-urls&${campaign_params}`),$("a.task-source-bulk_linkedin_urls").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-linkedin-urls&${campaign_params}`),$("a.task-source-bulk_company_linkedin_urls").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-company-linkedin-urls&${campaign_params}`),$("a.task-source-bulk_company_domains").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-company-domains&${campaign_params}`),$("a.task-source-bulk_post_urls").attr("href",`${Config.server_base_path}${Config.popup.create_scrape_task}?source=bulk-post-urls&${campaign_params}`)),$("a.show-extra-menu").click(function(){$(".extra-menu").show(),$(this).hide()}),Config.extension_store_url&&$("a.link-rate-extension").attr("href",Config.extension_store_url).show(),request_server(Config.APIs.user_profile,null,e=>{render_usage(e.quota),$("a.link-logo").attr("href",`${Config.server_base_path}${Config.popup.app}?${campaign_params}`)},()=>{render_usage({email:-1,prospect:-1,scrape:-1})}),$(".search-box.prospect .flaticon-search").click(()=>{do_search("prospect")}),$(".search-box.prospect input").keyup(function(e){13===e.keyCode&&do_search("prospect")}),$(".search-box.contacts .flaticon-search").click(()=>{do_search("contacts")}),$(".search-box.contacts input").keyup(function(e){13===e.keyCode&&do_search("contacts")})}$(function(){chrome.runtime.sendMessage({type:"finalscout:popup:config:req"},e=>{Config=e,init()})});